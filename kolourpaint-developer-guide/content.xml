<?xml version="1.0" encoding="UTF-8"?>

<office:document-content xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:style="urn:oasis:names:tc:opendocument:xmlns:style:1.0" xmlns:text="urn:oasis:names:tc:opendocument:xmlns:text:1.0" xmlns:table="urn:oasis:names:tc:opendocument:xmlns:table:1.0" xmlns:draw="urn:oasis:names:tc:opendocument:xmlns:drawing:1.0" xmlns:fo="urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:number="urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0" xmlns:svg="urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0" xmlns:chart="urn:oasis:names:tc:opendocument:xmlns:chart:1.0" xmlns:dr3d="urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0" xmlns:math="http://www.w3.org/1998/Math/MathML" xmlns:form="urn:oasis:names:tc:opendocument:xmlns:form:1.0" xmlns:script="urn:oasis:names:tc:opendocument:xmlns:script:1.0" xmlns:ooo="http://openoffice.org/2004/office" xmlns:ooow="http://openoffice.org/2004/writer" xmlns:oooc="http://openoffice.org/2004/calc" xmlns:dom="http://www.w3.org/2001/xml-events" xmlns:xforms="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" office:version="1.0">
 <office:scripts/>
 <office:font-face-decls>
  <style:font-face style:name="StarSymbol" svg:font-family="StarSymbol" style:font-charset="x-symbol"/>
  <style:font-face style:name="Courier 10 Pitch" svg:font-family="&apos;Courier 10 Pitch&apos;" style:font-adornments="Regular" style:font-pitch="fixed"/>
  <style:font-face style:name="Courier New" svg:font-family="&apos;Courier New&apos;" style:font-family-generic="modern" style:font-pitch="fixed"/>
  <style:font-face style:name="Arial Black" svg:font-family="&apos;Arial Black&apos;" style:font-adornments="Bold" style:font-pitch="variable"/>
  <style:font-face style:name="Tahoma1" svg:font-family="Tahoma" style:font-pitch="variable"/>
  <style:font-face style:name="Times New Roman2" svg:font-family="&apos;Times New Roman&apos;" style:font-pitch="variable"/>
  <style:font-face style:name="Times New Roman1" svg:font-family="&apos;Times New Roman&apos;" style:font-adornments="Regular" style:font-pitch="variable"/>
  <style:font-face style:name="Times New Roman" svg:font-family="&apos;Times New Roman&apos;" style:font-family-generic="roman" style:font-pitch="variable"/>
  <style:font-face style:name="Arial" svg:font-family="Arial" style:font-family-generic="swiss" style:font-pitch="variable"/>
  <style:font-face style:name="Tahoma" svg:font-family="Tahoma" style:font-adornments="Regular" style:font-family-generic="swiss" style:font-pitch="variable"/>
 </office:font-face-decls>
 <office:automatic-styles>
  <style:style style:name="P1" style:family="paragraph" style:parent-style-name="Standard" style:master-page-name="Document_20_Frontmost_20_Page">
   <style:paragraph-properties fo:text-align="end" style:justify-single-word="false"/>
   <style:text-properties fo:font-weight="bold" style:font-weight-asian="bold" style:font-weight-complex="bold"/>
  </style:style>
  <style:style style:name="P2" style:family="paragraph" style:parent-style-name="Standard">
   <style:text-properties fo:font-weight="bold" style:font-weight-asian="bold" style:font-weight-complex="bold"/>
  </style:style>
  <style:style style:name="P3" style:family="paragraph" style:parent-style-name="Standard">
   <style:text-properties style:font-name="Tahoma1" fo:font-size="18pt" fo:font-weight="normal" style:font-size-asian="18pt" style:font-weight-asian="normal" style:font-size-complex="18pt" style:font-weight-complex="normal"/>
  </style:style>
  <style:style style:name="P4" style:family="paragraph" style:parent-style-name="Standard">
   <style:paragraph-properties fo:text-align="center" style:justify-single-word="false"/>
   <style:text-properties style:font-name="Tahoma1" fo:font-size="16pt" fo:font-weight="normal" style:font-size-asian="16pt" style:font-weight-asian="normal" style:font-size-complex="16pt" style:font-weight-complex="normal"/>
  </style:style>
  <style:style style:name="P5" style:family="paragraph" style:parent-style-name="Standard">
   <style:paragraph-properties fo:text-align="center" style:justify-single-word="false"/>
   <style:text-properties style:font-name="Tahoma1" fo:font-size="18pt" fo:font-weight="bold" style:font-size-asian="18pt" style:font-weight-asian="bold" style:font-size-complex="18pt" style:font-weight-complex="bold"/>
  </style:style>
  <style:style style:name="P6" style:family="paragraph" style:parent-style-name="Standard">
   <style:paragraph-properties fo:text-align="center" style:justify-single-word="false"/>
   <style:text-properties style:font-name="Tahoma1" fo:font-size="24pt" fo:font-weight="bold" style:font-size-asian="24pt" style:font-weight-asian="bold" style:font-size-complex="24pt" style:font-weight-complex="bold"/>
  </style:style>
  <style:style style:name="P7" style:family="paragraph" style:parent-style-name="Standard">
   <style:paragraph-properties fo:text-align="center" style:justify-single-word="false"/>
   <style:text-properties style:font-name="Arial" fo:font-size="16pt" style:font-size-asian="16pt" style:font-size-complex="16pt"/>
  </style:style>
  <style:style style:name="P8" style:family="paragraph" style:parent-style-name="Standard">
   <style:paragraph-properties fo:text-align="center" style:justify-single-word="false"/>
   <style:text-properties style:font-name="Arial" fo:font-size="12pt" style:font-size-asian="12pt" style:font-size-complex="12pt"/>
  </style:style>
  <style:style style:name="P9" style:family="paragraph" style:parent-style-name="Standard">
   <style:paragraph-properties fo:text-align="center" style:justify-single-word="false"/>
   <style:text-properties style:font-name="Arial" fo:font-size="14pt" style:font-size-asian="14pt" style:font-size-complex="14pt"/>
  </style:style>
  <style:style style:name="P10" style:family="paragraph" style:parent-style-name="Standard" style:master-page-name="Document_20_Front_20_Pages">
   <style:paragraph-properties fo:text-align="center" style:justify-single-word="false"/>
   <style:text-properties style:font-name="Arial" fo:font-size="14pt" style:font-size-asian="14pt" style:font-size-complex="14pt"/>
  </style:style>
  <style:style style:name="P11" style:family="paragraph" style:parent-style-name="Standard" style:master-page-name="Document_20_Front_20_Pages">
   <style:paragraph-properties fo:text-align="center" style:justify-single-word="false"/>
   <style:text-properties style:font-name="Tahoma1" fo:font-size="28pt" style:font-size-asian="28pt" style:font-size-complex="28pt"/>
  </style:style>
  <style:style style:name="P12" style:family="paragraph" style:parent-style-name="Standard">
   <style:paragraph-properties fo:text-align="center" style:justify-single-word="false"/>
   <style:text-properties style:font-name="Tahoma1" fo:font-size="28pt" style:font-size-asian="28pt" style:font-size-complex="28pt"/>
  </style:style>
  <style:style style:name="P13" style:family="paragraph" style:parent-style-name="Text_20_body">
   <style:paragraph-properties style:writing-mode="lr-tb"/>
  </style:style>
  <style:style style:name="P14" style:family="paragraph" style:parent-style-name="Contents_20_Heading">
   <style:paragraph-properties fo:break-before="page"/>
  </style:style>
  <style:style style:name="P15" style:family="paragraph" style:parent-style-name="Contents_20_1">
   <style:paragraph-properties>
    <style:tab-stops>
     <style:tab-stop style:position="6.3102in" style:type="right" style:leader-style="dotted" style:leader-text="."/>
    </style:tab-stops>
   </style:paragraph-properties>
  </style:style>
  <style:style style:name="P16" style:family="paragraph" style:parent-style-name="Contents_20_2">
   <style:paragraph-properties>
    <style:tab-stops>
     <style:tab-stop style:position="6.1138in" style:type="right" style:leader-style="dotted" style:leader-text="."/>
    </style:tab-stops>
   </style:paragraph-properties>
  </style:style>
  <style:style style:name="P17" style:family="paragraph" style:parent-style-name="Contents_20_3">
   <style:paragraph-properties>
    <style:tab-stops>
     <style:tab-stop style:position="5.9173in" style:type="right" style:leader-style="dotted" style:leader-text="."/>
    </style:tab-stops>
   </style:paragraph-properties>
  </style:style>
  <style:style style:name="P18" style:family="paragraph" style:parent-style-name="Illustration_20_Index_20_Heading">
   <style:paragraph-properties fo:break-before="page"/>
  </style:style>
  <style:style style:name="P19" style:family="paragraph" style:parent-style-name="Table_20_index_20_heading">
   <style:paragraph-properties fo:break-before="page"/>
  </style:style>
  <style:style style:name="P20" style:family="paragraph" style:parent-style-name="Chapter_20_Start" style:master-page-name="Section_20_Front_20_Page"/>
  <style:style style:name="P21" style:family="paragraph" style:parent-style-name="Heading_20_2">
   <style:paragraph-properties fo:break-before="page"/>
  </style:style>
  <style:style style:name="P22" style:family="paragraph" style:parent-style-name="Text_20_body" style:list-style-name="L2"/>
  <style:style style:name="P23" style:family="paragraph" style:parent-style-name="Text_20_body" style:list-style-name="L3"/>
  <style:style style:name="P24" style:family="paragraph" style:parent-style-name="Text_20_body" style:list-style-name="L4"/>
  <style:style style:name="P25" style:family="paragraph" style:parent-style-name="Text_20_body">
   <style:paragraph-properties fo:margin-left="0in" fo:margin-right="0in" fo:text-indent="0in" style:auto-text-indent="false"/>
  </style:style>
  <style:style style:name="P26" style:family="paragraph" style:parent-style-name="Text_20_body" style:list-style-name="L5"/>
  <style:style style:name="P27" style:family="paragraph" style:parent-style-name="Text_20_body" style:list-style-name="L6"/>
  <style:style style:name="P28" style:family="paragraph" style:parent-style-name="Text_20_body" style:list-style-name="L7"/>
  <style:style style:name="P29" style:family="paragraph" style:parent-style-name="Text_20_body">
   <style:text-properties fo:font-style="normal" style:font-style-asian="normal" style:font-style-complex="normal"/>
  </style:style>
  <style:style style:name="P30" style:family="paragraph" style:parent-style-name="Bibliography_20_Heading" style:master-page-name="Bibliography_20_Front_20_Page"/>
  <style:style style:name="P31" style:family="paragraph" style:parent-style-name="Text_20_body">
   <style:text-properties style:font-name="Times New Roman2" fo:font-size="12pt" style:font-size-asian="12pt" style:font-size-complex="12pt"/>
  </style:style>
  <style:style style:name="T1" style:family="text">
   <style:text-properties style:text-position="super 58%"/>
  </style:style>
  <style:style style:name="Sect1" style:family="section">
   <style:section-properties fo:background-color="transparent" style:editable="false">
    <style:columns fo:column-count="0" fo:column-gap="0in"/>
    <style:background-image/>
   </style:section-properties>
  </style:style>
  <style:style style:name="Sect2" style:family="section">
   <style:section-properties style:editable="false">
    <style:columns fo:column-count="0" fo:column-gap="0in"/>
   </style:section-properties>
  </style:style>
  <text:list-style style:name="L1">
   <text:list-level-style-number text:level="1" text:style-name="Numbering_20_Symbols" style:num-suffix=" " style:num-format="1">
    <style:list-level-properties text:min-label-distance="0.15in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="2" text:style-name="Numbering_20_Symbols" style:num-suffix=" " style:num-format="1" text:display-levels="2">
    <style:list-level-properties text:min-label-distance="0.15in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="3" text:style-name="Numbering_20_Symbols" style:num-suffix=" " style:num-format="1" text:display-levels="3">
    <style:list-level-properties text:min-label-distance="0.15in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="4" style:num-suffix=" " style:num-format="">
    <style:list-level-properties text:min-label-distance="0.15in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="5" style:num-suffix=" " style:num-format="">
    <style:list-level-properties text:min-label-distance="0.15in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="6" style:num-suffix=" " style:num-format="">
    <style:list-level-properties text:min-label-distance="0.15in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="7" style:num-suffix=" " style:num-format="">
    <style:list-level-properties text:min-label-distance="0.15in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="8" style:num-suffix=" " style:num-format="">
    <style:list-level-properties text:min-label-distance="0.15in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="9" style:num-suffix=" " style:num-format="">
    <style:list-level-properties text:min-label-distance="0.15in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="10" style:num-suffix=" " style:num-format="">
    <style:list-level-properties text:min-label-distance="0.15in"/>
   </text:list-level-style-number>
  </text:list-style>
  <text:list-style style:name="L2">
   <text:list-level-style-bullet text:level="1" text:style-name="Bullet_20_Symbols" style:num-suffix="." text:bullet-char="•">
    <style:list-level-properties text:min-label-width="0.25in"/>
    <style:text-properties style:font-name="StarSymbol"/>
   </text:list-level-style-bullet>
   <text:list-level-style-bullet text:level="2" text:style-name="Bullet_20_Symbols" style:num-suffix="." text:bullet-char="•">
    <style:list-level-properties text:space-before="0.25in" text:min-label-width="0.25in"/>
    <style:text-properties style:font-name="StarSymbol"/>
   </text:list-level-style-bullet>
   <text:list-level-style-bullet text:level="3" text:style-name="Bullet_20_Symbols" style:num-suffix="." text:bullet-char="•">
    <style:list-level-properties text:space-before="0.5in" text:min-label-width="0.25in"/>
    <style:text-properties style:font-name="StarSymbol"/>
   </text:list-level-style-bullet>
   <text:list-level-style-bullet text:level="4" text:style-name="Bullet_20_Symbols" style:num-suffix="." text:bullet-char="•">
    <style:list-level-properties text:space-before="0.75in" text:min-label-width="0.25in"/>
    <style:text-properties style:font-name="StarSymbol"/>
   </text:list-level-style-bullet>
   <text:list-level-style-bullet text:level="5" text:style-name="Bullet_20_Symbols" style:num-suffix="." text:bullet-char="•">
    <style:list-level-properties text:space-before="1in" text:min-label-width="0.25in"/>
    <style:text-properties style:font-name="StarSymbol"/>
   </text:list-level-style-bullet>
   <text:list-level-style-bullet text:level="6" text:style-name="Bullet_20_Symbols" style:num-suffix="." text:bullet-char="•">
    <style:list-level-properties text:space-before="1.25in" text:min-label-width="0.25in"/>
    <style:text-properties style:font-name="StarSymbol"/>
   </text:list-level-style-bullet>
   <text:list-level-style-bullet text:level="7" text:style-name="Bullet_20_Symbols" style:num-suffix="." text:bullet-char="•">
    <style:list-level-properties text:space-before="1.5in" text:min-label-width="0.25in"/>
    <style:text-properties style:font-name="StarSymbol"/>
   </text:list-level-style-bullet>
   <text:list-level-style-bullet text:level="8" text:style-name="Bullet_20_Symbols" style:num-suffix="." text:bullet-char="•">
    <style:list-level-properties text:space-before="1.75in" text:min-label-width="0.25in"/>
    <style:text-properties style:font-name="StarSymbol"/>
   </text:list-level-style-bullet>
   <text:list-level-style-bullet text:level="9" text:style-name="Bullet_20_Symbols" style:num-suffix="." text:bullet-char="•">
    <style:list-level-properties text:space-before="2in" text:min-label-width="0.25in"/>
    <style:text-properties style:font-name="StarSymbol"/>
   </text:list-level-style-bullet>
   <text:list-level-style-bullet text:level="10" text:style-name="Bullet_20_Symbols" style:num-suffix="." text:bullet-char="•">
    <style:list-level-properties text:space-before="2.25in" text:min-label-width="0.25in"/>
    <style:text-properties style:font-name="StarSymbol"/>
   </text:list-level-style-bullet>
  </text:list-style>
  <text:list-style style:name="L3">
   <text:list-level-style-number text:level="1" text:style-name="Numbering_20_Symbols" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="0.25in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="2" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="0.5in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="3" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="0.75in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="4" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="1in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="5" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="1.25in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="6" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="1.5in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="7" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="1.75in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="8" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="2in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="9" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="2.25in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="10" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="2.5in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
  </text:list-style>
  <text:list-style style:name="L4">
   <text:list-level-style-number text:level="1" text:style-name="Numbering_20_Symbols" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="0.25in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="2" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="0.5in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="3" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="0.75in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="4" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="1in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="5" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="1.25in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="6" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="1.5in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="7" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="1.75in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="8" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="2in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="9" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="2.25in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="10" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="2.5in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
  </text:list-style>
  <text:list-style style:name="L5">
   <text:list-level-style-number text:level="1" text:style-name="Numbering_20_Symbols" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="0.25in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="2" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="0.5in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="3" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="0.75in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="4" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="1in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="5" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="1.25in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="6" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="1.5in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="7" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="1.75in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="8" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="2in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="9" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="2.25in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="10" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="2.5in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
  </text:list-style>
  <text:list-style style:name="L6">
   <text:list-level-style-number text:level="1" text:style-name="Numbering_20_Symbols" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="0.25in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="2" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="0.5in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="3" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="0.75in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="4" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="1in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="5" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="1.25in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="6" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="1.5in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="7" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="1.75in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="8" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="2in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="9" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="2.25in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
   <text:list-level-style-number text:level="10" style:num-suffix="." style:num-format="1">
    <style:list-level-properties text:space-before="2.5in" text:min-label-width="0.25in"/>
   </text:list-level-style-number>
  </text:list-style>
  <text:list-style style:name="L7">
   <text:list-level-style-bullet text:level="1" text:style-name="Bullet_20_Symbols" style:num-suffix="." text:bullet-char="•">
    <style:list-level-properties text:min-label-width="0.25in"/>
    <style:text-properties style:font-name="StarSymbol"/>
   </text:list-level-style-bullet>
   <text:list-level-style-bullet text:level="2" text:style-name="Bullet_20_Symbols" style:num-suffix="." text:bullet-char="•">
    <style:list-level-properties text:space-before="0.25in" text:min-label-width="0.25in"/>
    <style:text-properties style:font-name="StarSymbol"/>
   </text:list-level-style-bullet>
   <text:list-level-style-bullet text:level="3" text:style-name="Bullet_20_Symbols" style:num-suffix="." text:bullet-char="•">
    <style:list-level-properties text:space-before="0.5in" text:min-label-width="0.25in"/>
    <style:text-properties style:font-name="StarSymbol"/>
   </text:list-level-style-bullet>
   <text:list-level-style-bullet text:level="4" text:style-name="Bullet_20_Symbols" style:num-suffix="." text:bullet-char="•">
    <style:list-level-properties text:space-before="0.75in" text:min-label-width="0.25in"/>
    <style:text-properties style:font-name="StarSymbol"/>
   </text:list-level-style-bullet>
   <text:list-level-style-bullet text:level="5" text:style-name="Bullet_20_Symbols" style:num-suffix="." text:bullet-char="•">
    <style:list-level-properties text:space-before="1in" text:min-label-width="0.25in"/>
    <style:text-properties style:font-name="StarSymbol"/>
   </text:list-level-style-bullet>
   <text:list-level-style-bullet text:level="6" text:style-name="Bullet_20_Symbols" style:num-suffix="." text:bullet-char="•">
    <style:list-level-properties text:space-before="1.25in" text:min-label-width="0.25in"/>
    <style:text-properties style:font-name="StarSymbol"/>
   </text:list-level-style-bullet>
   <text:list-level-style-bullet text:level="7" text:style-name="Bullet_20_Symbols" style:num-suffix="." text:bullet-char="•">
    <style:list-level-properties text:space-before="1.5in" text:min-label-width="0.25in"/>
    <style:text-properties style:font-name="StarSymbol"/>
   </text:list-level-style-bullet>
   <text:list-level-style-bullet text:level="8" text:style-name="Bullet_20_Symbols" style:num-suffix="." text:bullet-char="•">
    <style:list-level-properties text:space-before="1.75in" text:min-label-width="0.25in"/>
    <style:text-properties style:font-name="StarSymbol"/>
   </text:list-level-style-bullet>
   <text:list-level-style-bullet text:level="9" text:style-name="Bullet_20_Symbols" style:num-suffix="." text:bullet-char="•">
    <style:list-level-properties text:space-before="2in" text:min-label-width="0.25in"/>
    <style:text-properties style:font-name="StarSymbol"/>
   </text:list-level-style-bullet>
   <text:list-level-style-bullet text:level="10" text:style-name="Bullet_20_Symbols" style:num-suffix="." text:bullet-char="•">
    <style:list-level-properties text:space-before="2.25in" text:min-label-width="0.25in"/>
    <style:text-properties style:font-name="StarSymbol"/>
   </text:list-level-style-bullet>
  </text:list-style>
 </office:automatic-styles>
 <office:body>
  <office:text>
   <office:forms form:automatic-focus="false" form:apply-design-mode="false"/>
   <text:sequence-decls>
    <text:sequence-decl text:display-outline-level="0" text:name="Illustration"/>
    <text:sequence-decl text:display-outline-level="0" text:name="Table"/>
    <text:sequence-decl text:display-outline-level="0" text:name="Text"/>
    <text:sequence-decl text:display-outline-level="0" text:name="Drawing"/>
   </text:sequence-decls>
   <text:p text:style-name="P1"/>
   <text:p text:style-name="P2"/>
   <text:p text:style-name="P3"/>
   <text:p text:style-name="P3"/>
   <text:p text:style-name="P4"/>
   <text:p text:style-name="P5"/>
   <text:p text:style-name="P5"/>
   <text:p text:style-name="P5"/>
   <text:p text:style-name="P6">KolourPaint 4.0.0pre<text:line-break/>Developer Guide</text:p>
   <text:p text:style-name="P6"/>
   <text:p text:style-name="P7">http://www.kolourpaint.org/</text:p>
   <text:p text:style-name="P7"/>
   <text:p text:style-name="P7"/>
   <text:p text:style-name="P7"/>
   <text:p text:style-name="P7"/>
   <text:p text:style-name="P7"/>
   <text:p text:style-name="P7"/>
   <text:p text:style-name="P7">Clarence Dang</text:p>
   <text:p text:style-name="P8">&lt;clarencedang AT users.sourceforge.net&gt;</text:p>
   <text:p text:style-name="P7"/>
   <text:p text:style-name="P9"/>
   <text:p text:style-name="P7"/>
   <text:p text:style-name="P7"/>
   <text:p text:style-name="P7"/>
   <text:p text:style-name="P7"/>
   <text:p text:style-name="P7"/>
   <text:p text:style-name="P9"/>
   <text:p text:style-name="P8">Revision: 2007-01-06</text:p>
   <text:p text:style-name="P8"/>
   <text:p text:style-name="P8">Like software, this document is a work-in-progress.</text:p>
   <text:p text:style-name="P8">TODO: Unfortunately, it has not reached a useful level of maturity yet.</text:p>
   <text:p text:style-name="P8"/>
   <text:p text:style-name="P8"/>
   <text:p text:style-name="P8"/>
   <text:p text:style-name="P8"/>
   <text:p text:style-name="P9"/>
   <text:p text:style-name="P9"/>
   <text:p text:style-name="P9"/>
   <text:p text:style-name="P10"/>
   <text:p text:style-name="Text_20_body"/>
   <text:p text:style-name="Text_20_body"/>
   <text:p text:style-name="Text_20_body"/>
   <text:p text:style-name="Text_20_body"/>
   <text:p text:style-name="Text_20_body"/>
   <text:p text:style-name="Text_20_body"/>
   <text:p text:style-name="Text_20_body"/>
   <text:p text:style-name="Heading_20_1_20__28_centred_2c__20_not_20_in_20_contents_29_">Abstract</text:p>
   <text:p text:style-name="Text_20_body">TODO</text:p>
   <text:p text:style-name="Text_20_body"/>
   <text:p text:style-name="P11"/>
   <text:p text:style-name="P12"/>
   <text:p text:style-name="P12"/>
   <text:p text:style-name="P12"/>
   <text:p text:style-name="P12"/>
   <text:p text:style-name="Heading_20_1_20__28_centred_2c__20_not_20_in_20_contents_29_">Acknowledgements</text:p>
   <text:p text:style-name="P13">TODO</text:p>
   <text:table-of-content text:style-name="Sect1" text:protected="true" text:name="Table of Contents1">
    <text:table-of-content-source text:outline-level="3">
     <text:index-title-template text:style-name="Contents_20_Heading">Table of Contents</text:index-title-template>
     <text:table-of-content-entry-template text:outline-level="1" text:style-name="Contents_20_1">
      <text:index-entry-chapter/>
      <text:index-entry-text/>
      <text:index-entry-tab-stop style:type="right" style:leader-char="."/>
      <text:index-entry-page-number/>
     </text:table-of-content-entry-template>
     <text:table-of-content-entry-template text:outline-level="2" text:style-name="Contents_20_2">
      <text:index-entry-chapter/>
      <text:index-entry-text/>
      <text:index-entry-tab-stop style:type="right" style:leader-char="."/>
      <text:index-entry-page-number/>
     </text:table-of-content-entry-template>
     <text:table-of-content-entry-template text:outline-level="3" text:style-name="Contents_20_3">
      <text:index-entry-chapter/>
      <text:index-entry-text/>
      <text:index-entry-tab-stop style:type="right" style:leader-char="."/>
      <text:index-entry-page-number/>
     </text:table-of-content-entry-template>
     <text:table-of-content-entry-template text:outline-level="4" text:style-name="Contents_20_4">
      <text:index-entry-chapter/>
      <text:index-entry-text/>
      <text:index-entry-tab-stop style:type="right" style:leader-char="."/>
      <text:index-entry-page-number/>
     </text:table-of-content-entry-template>
     <text:table-of-content-entry-template text:outline-level="5" text:style-name="Contents_20_5">
      <text:index-entry-chapter/>
      <text:index-entry-text/>
      <text:index-entry-tab-stop style:type="right" style:leader-char="."/>
      <text:index-entry-page-number/>
     </text:table-of-content-entry-template>
     <text:table-of-content-entry-template text:outline-level="6" text:style-name="Contents_20_6">
      <text:index-entry-chapter/>
      <text:index-entry-text/>
      <text:index-entry-tab-stop style:type="right" style:leader-char="."/>
      <text:index-entry-page-number/>
     </text:table-of-content-entry-template>
     <text:table-of-content-entry-template text:outline-level="7" text:style-name="Contents_20_7">
      <text:index-entry-chapter/>
      <text:index-entry-text/>
      <text:index-entry-tab-stop style:type="right" style:leader-char="."/>
      <text:index-entry-page-number/>
     </text:table-of-content-entry-template>
     <text:table-of-content-entry-template text:outline-level="8" text:style-name="Contents_20_8">
      <text:index-entry-chapter/>
      <text:index-entry-text/>
      <text:index-entry-tab-stop style:type="right" style:leader-char="."/>
      <text:index-entry-page-number/>
     </text:table-of-content-entry-template>
     <text:table-of-content-entry-template text:outline-level="9" text:style-name="Contents_20_9">
      <text:index-entry-chapter/>
      <text:index-entry-text/>
      <text:index-entry-tab-stop style:type="right" style:leader-char="."/>
      <text:index-entry-page-number/>
     </text:table-of-content-entry-template>
     <text:table-of-content-entry-template text:outline-level="10" text:style-name="Contents_20_10">
      <text:index-entry-chapter/>
      <text:index-entry-text/>
      <text:index-entry-tab-stop style:type="right" style:leader-char="."/>
      <text:index-entry-page-number/>
     </text:table-of-content-entry-template>
    </text:table-of-content-source>
    <text:index-body>
     <text:index-title text:style-name="Sect2" text:name="Table of Contents1_Head">
      <text:p text:style-name="P14">Table of Contents</text:p>
     </text:index-title>
     <text:p text:style-name="P15">1 Introduction<text:tab/>7</text:p>
     <text:p text:style-name="P16">1.1 About This Document<text:tab/>7</text:p>
     <text:p text:style-name="P17">1.1.1 Contents<text:tab/>7</text:p>
     <text:p text:style-name="P17">1.1.2 Notation<text:tab/>7</text:p>
     <text:p text:style-name="P17">1.1.3 Editing<text:tab/>8</text:p>
     <text:p text:style-name="P16">1.2 Goals<text:tab/>9</text:p>
     <text:p text:style-name="P16">1.3 Report Structure<text:tab/>10</text:p>
     <text:p text:style-name="P15">2 Background<text:tab/>11</text:p>
     <text:p text:style-name="P16">2.1 History<text:tab/>11</text:p>
     <text:p text:style-name="P16">2.2 Current Work<text:tab/>11</text:p>
     <text:p text:style-name="P17">Short Term<text:tab/>11</text:p>
     <text:p text:style-name="P16">2.3 Project Structure<text:tab/>12</text:p>
     <text:p text:style-name="P17">2.3.1 People<text:tab/>12</text:p>
     <text:p text:style-name="P17">2.3.2 Technical Resources<text:tab/>12</text:p>
     <text:p text:style-name="P17">2.3.3 Discussion<text:tab/>14</text:p>
     <text:p text:style-name="P16">2.4 Versions<text:tab/>14</text:p>
     <text:p text:style-name="P15">3 Concepts<text:tab/>15</text:p>
     <text:p text:style-name="P16">3.1 Class Diagram<text:tab/>16</text:p>
     <text:p text:style-name="P16">3.2 Paint Engine<text:tab/>16</text:p>
     <text:p text:style-name="P16">3.3 Entry Point<text:tab/>17</text:p>
     <text:p text:style-name="P16">3.4 Main Window<text:tab/>17</text:p>
     <text:p text:style-name="P16">3.5 Views<text:tab/>18</text:p>
     <text:p text:style-name="P16">3.6 Commands<text:tab/>18</text:p>
     <text:p text:style-name="P16">3.7 Tools<text:tab/>18</text:p>
     <text:p text:style-name="P16">3.8 Selections<text:tab/>18</text:p>
     <text:p text:style-name="P15">4 Conclusion<text:tab/>20</text:p>
     <text:p text:style-name="P16">4.1 Achievements<text:tab/>21</text:p>
     <text:p text:style-name="P16">4.2 Future Work<text:tab/>22</text:p>
    </text:index-body>
   </text:table-of-content>
   <text:p text:style-name="Chapter_20_Start"/>
   <text:illustration-index text:style-name="Sect2" text:protected="true" text:name="Illustration Index1">
    <text:illustration-index-source text:caption-sequence-name="Illustration" text:caption-sequence-format="text">
     <text:index-title-template text:style-name="Illustration_20_Index_20_Heading">Illustration Index</text:index-title-template>
     <text:illustration-index-entry-template text:style-name="Illustration_20_Index_20_1">
      <text:index-entry-text/>
      <text:index-entry-tab-stop style:type="right" style:leader-char="."/>
      <text:index-entry-page-number/>
     </text:illustration-index-entry-template>
    </text:illustration-index-source>
    <text:index-body>
     <text:index-title text:style-name="Sect2" text:name="Illustration Index1_Head">
      <text:p text:style-name="P18">Illustration Index</text:p>
     </text:index-title>
    </text:index-body>
   </text:illustration-index>
   <text:p text:style-name="Text_20_body"/>
   <text:table-index text:style-name="Sect1" text:protected="true" text:name="Index of Tables1">
    <text:table-index-source text:caption-sequence-name="Table" text:caption-sequence-format="text">
     <text:index-title-template text:style-name="Table_20_index_20_heading">Index of Tables</text:index-title-template>
     <text:table-index-entry-template text:style-name="Table_20_index_20_1">
      <text:index-entry-text/>
      <text:index-entry-tab-stop style:type="right" style:leader-char="."/>
      <text:index-entry-page-number/>
     </text:table-index-entry-template>
    </text:table-index-source>
    <text:index-body>
     <text:index-title text:style-name="Sect2" text:name="Index of Tables1_Head">
      <text:p text:style-name="P19">Index of Tables</text:p>
     </text:index-title>
    </text:index-body>
   </text:table-index>
   <text:p text:style-name="Text_20_body"/>
   <text:p text:style-name="P20">Chapter 1</text:p>
   <text:h text:style-name="Heading_20_1" text:outline-level="1">Introduction</text:h>
   <text:p text:style-name="Text_20_body">TODO</text:p>
   <text:h text:style-name="Heading_20_2" text:outline-level="2">About This Document</text:h>
   <text:h text:style-name="Heading_20_3" text:outline-level="3">Contents</text:h>
   <text:p text:style-name="Text_20_body">This document is a concise and thorough guide containing all the knowledge – organisational and technical design &amp; implementation – needed to maintain and modify KolourPaint. <text:s/>Highly dynamic, implementation details, and hacks not really worth mentioning, are described in source code comments. <text:s/>Where possible it points to existing, high-quality information instead of duplicating it here. <text:s/>TODO: not thorough yet.</text:p>
   <text:p text:style-name="Text_20_body">TODO: Merge all the docs in <text:span text:style-name="Code_20_Term">branches/kolourpaint/control</text:span>.</text:p>
   <text:h text:style-name="Heading_20_3" text:outline-level="3">Notation</text:h>
   <text:p text:style-name="Text_20_body"><text:span text:style-name="Non-Code_20_Term">TODO</text:span> means something that we need to do document-wise.</text:p>
   <text:p text:style-name="Text_20_body"><text:span text:style-name="Non-Code_20_Term">ACTION</text:span> means something that we need to code-wise or project-wise.</text:p>
   <text:p text:style-name="Text_20_body"><text:span text:style-name="Non-Code_20_Term">CITE</text:span> means we need to add a reference (<text:span text:style-name="Non-Code_20_Term">Insert / Indexes and Tables ... / Bibliography Entry / From document content</text:span>).</text:p>
   <text:p text:style-name="Text_20_body"><text:span text:style-name="Non-Code_20_Term">PICTURE</text:span> means that we need to add a picture or diagram for clarity.</text:p>
   <text:h text:style-name="Heading_20_3" text:outline-level="3">Editing</text:h>
   <text:h text:style-name="Heading_20_4" text:outline-level="4">Generating this Document</text:h>
   <text:p text:style-name="Text_20_body">This is a generated file. <text:s/></text:p>
   <text:p text:style-name="Text_20_body">Use <text:span text:style-name="Code_20_Term">https://svn.kde.org/home/kde/branches/kolourpaint/control/Makefile</text:span> to regenerate this file (see inside that <text:span text:style-name="Code_20_Term">Makefile</text:span> for details).</text:p>
   <text:h text:style-name="Heading_20_4" text:outline-level="4">Language</text:h>
   <text:p text:style-name="Text_20_body">Please use <text:span text:style-name="Code_20_Term">en_US</text:span> (US English) and not <text:span text:style-name="Code_20_Term">en_AU</text:span> (Australian English) or <text:span text:style-name="Code_20_Term">en_GB</text:span> (British English) for all documentation and code, as it reflects the internationalness [TODO: not a word] of the project. <text:s/>Furthermore, the KDE <text:span text:style-name="Code_20_Term">i18n()</text:span> calls expect strings in <text:span text:style-name="Code_20_Term">en_US</text:span>. <text:s/>The project started with <text:span text:style-name="Code_20_Term">en_AU</text:span> because Clarence Dang is Australian.</text:p>
   <text:p text:style-name="Text_20_body">Please use 3<text:span text:style-name="T1">rd</text:span> person as there is hopefully not only one person involved with the project.</text:p>
   <text:h text:style-name="Heading_20_4" text:outline-level="4">Use OpenOffice.org</text:h>
   <text:p text:style-name="Text_20_body">Please use OpenOffice.org 2.0.0 to edit this document, to minimise formatting changing pecularities. <text:s/>Press <text:span text:style-name="Code_20_Term">F11</text:span> to enable the <text:span text:style-name="Non-Code_20_Term">Styles and Formatting</text:span> window and select the <text:span text:style-name="Non-Code_20_Term">Applied Styles</text:span> filter. <text:s/>Press <text:span text:style-name="Code_20_Term">F5</text:span> to enable the <text:span text:style-name="Non-Code_20_Term">Navigator</text:span> window. <text:s/>Dock both to the left of the main view.</text:p>
   <text:p text:style-name="Text_20_body">Every so often, click <text:span text:style-name="Non-Code_20_Term">Tools / Update / Update All</text:span> to regenerate generated fields (e.g. the <text:span text:style-name="Non-Code_20_Term">Table of Contents</text:span> and the <text:span text:style-name="Non-Code_20_Term">Bibliography</text:span>).</text:p>
   <text:p text:style-name="Text_20_body">If inserting an image, use <text:span text:style-name="Non-Code_20_Term">Insert / Picture / From File...</text:span> - do not copy and paste it from a paint program as OpenOffice.org will resave it as PNG, which may be huge if the source image was well compressed e.g. JPEG.</text:p>
   <text:h text:style-name="Heading_20_4" text:outline-level="4">OpenOffice.org Styles</text:h>
   <text:p text:style-name="Text_20_body">TODO: more on how to use my document template</text:p>
   <text:h text:style-name="Heading_20_5" text:outline-level="5">Page Styles</text:h>
   <text:p text:style-name="Text_20_body"><text:span text:style-name="Non-Code_20_Term">Document Frontmost Page</text:span> is used for the title page of the document. <text:s/><text:span text:style-name="Non-Code_20_Term">Document Front Pages</text:span> is for the subsequent, non-content pages e.g. Table of Contents.</text:p>
   <text:p text:style-name="Text_20_body"><text:span text:style-name="Non-Code_20_Term">Section Front Page</text:span> is used the for the first page of each chapter. <text:s/><text:span text:style-name="Non-Code_20_Term">Default</text:span> is used for the remaining pages in each chapter.</text:p>
   <text:p text:style-name="Text_20_body"><text:span text:style-name="Non-Code_20_Term">Bibliography Front Page</text:span> is for the first page of the Bibliography. <text:s/><text:span text:style-name="Non-Code_20_Term">Bibliography Pages</text:span> is for the remaining Bibliography pages.</text:p>
   <text:h text:style-name="Heading_20_5" text:outline-level="5">Paragraph Styles</text:h>
   <text:h text:style-name="Heading_20_5" text:outline-level="5">Character Styles</text:h>
   <text:p text:style-name="Text_20_body">Separate sentences by two spaces out of stubborn old-fashion-ness.</text:p>
   <text:p text:style-name="Text_20_body"/>
   <text:p text:style-name="Text_20_body"/>
   <text:h text:style-name="P21" text:outline-level="2">Goals</text:h>
   <text:p text:style-name="Text_20_body">TODO</text:p>
   <text:h text:style-name="P21" text:outline-level="2">Report Structure</text:h>
   <text:p text:style-name="Text_20_body">TODO</text:p>
   <text:p text:style-name="Text_20_body"/>
   <text:p text:style-name="P20">Chapter 2</text:p>
   <text:h text:style-name="Heading_20_1" text:outline-level="1">Background</text:h>
   <text:p text:style-name="Text_20_body">TODO</text:p>
   <text:h text:style-name="Heading_20_2" text:outline-level="2">History</text:h>
   <text:h text:style-name="Heading_20_2" text:outline-level="2">Current Work</text:h>
   <text:h text:style-name="Heading_20_3" text:outline-level="3" text:is-list-header="true">Short Term</text:h>
   <text:list text:style-name="L2">
    <text:list-item>
     <text:p text:style-name="P22">Porting to KDE 4</text:p>
    </text:list-item>
    <text:list-item>
     <text:p text:style-name="P22">Refactoring</text:p>
    </text:list-item>
    <text:list-item>
     <text:p text:style-name="P22">Adding developer documentation (this document)</text:p>
    </text:list-item>
   </text:list>
   <text:h text:style-name="Heading_20_4" text:outline-level="4">Medium Term</text:h>
   <text:list text:style-name="L2">
    <text:list-item text:start-value="1">
     <text:p text:style-name="P22">Rewriting graphics engine to be device-independent [p<text:reference-ref text:reference-format="page" text:ref-name="Doc stored as QPixmap">22</text:reference-ref>, Chapter <text:reference-ref text:reference-format="chapter" text:ref-name="Doc stored as QPixmap">3.4</text:reference-ref>]</text:p>
    </text:list-item>
    <text:list-item>
     <text:p text:style-name="P22">Implement often requested features esp. 8-bit and alpha support</text:p>
    </text:list-item>
    <text:list-item>
     <text:p text:style-name="P22">Continual refinement to make it easier to use</text:p>
    </text:list-item>
    <text:list-item>
     <text:p text:style-name="P22">Steal ideas from other editors</text:p>
    </text:list-item>
   </text:list>
   <text:p text:style-name="Text_20_body"/>
   <text:h text:style-name="Heading_20_2" text:outline-level="2">Project Structure</text:h>
   <text:p text:style-name="Text_20_body">It is a cathedral by accident, like DOSEMU. <text:s text:c="2"/>It should be – and now tries to be – a Bazaar.</text:p>
   <text:h text:style-name="Heading_20_3" text:outline-level="3">People</text:h>
   <text:p text:style-name="Text_20_body">Many people have contributed to KolourPaint. <text:s/>However, here are the people who would have in-depth knowledge of the project:</text:p>
   <text:p text:style-name="Text_20_body">Clarence Dang <text:span text:style-name="Code_20_Term">&lt;clarencedang AT users.sourceforge.net&gt;</text:span> is the founder, main developer and maintainer. <text:s/>He wishes more people would jump in and contribute. <text:s/>Clarence drew the initial (and hopeless) icons using KolourPaint itself, until Kristof Borrey jumped on board.</text:p>
   <text:p text:style-name="Text_20_body">Thurston Dang <text:span text:style-name="Code_20_Term">&lt;thurston_dang AT users.sourceforge.net&gt;</text:span> provides advice on user interfaces changes and wrote the DocBook documentation (kdegraphics/doc/kolourpaint).</text:p>
   <text:p text:style-name="Text_20_body">Kazuki Ohta <text:s/><text:span text:style-name="Code_20_Term">&lt;mover AT hct.zaq.ne.jp&gt;</text:span> wrote the InputMethod support. <text:s/>He does not seem to reply to Clarence&apos;s email anymore. <text:s/>The InputMethod support has been disabled in KolourPaint for KDE4 as it has not been ported. <text:s/>ACTION: port</text:p>
   <text:p text:style-name="Text_20_body">Kristof Borrey <text:span text:style-name="Code_20_Term">&lt;borrey AT kde.org&gt;</text:span> drew the original set of icons.</text:p>
   <text:p text:style-name="Text_20_body">Nuno Pinheiro <text:span text:style-name="Code_20_Term">&lt;nf.pinheiro AT gmail.com&gt;</text:span> and Danny Allen <text:span text:style-name="Code_20_Term">&lt;dannya40uk AT yahoo.co.uk&gt;</text:span> replaced most of the icons with newer ones.</text:p>
   <text:h text:style-name="Heading_20_3" text:outline-level="3">Technical Resources</text:h>
   <text:h text:style-name="Heading_20_4" text:outline-level="4">Source Repository</text:h>
   <text:p text:style-name="Text_20_body">Initial versions held on Clarence Dang&apos;s hard disk. <text:s/>ACTION: upload onto internet.</text:p>
   <text:p text:style-name="Text_20_body">After a while, this was moved into KDE CVS.</text:p>
   <text:p text:style-name="Text_20_body">KDE then converted the repository to KDE SVN. <text:s/>The source code can be modified by anyone with an SVN account [CITE]. <text:s/>Either ask for an account, or send patches to <text:span text:style-name="Code_20_Term">&lt;kolourpaint-support AT lists.sourceforge.net&gt;</text:span>.</text:p>
   <text:p text:style-name="Text_20_body">branches/kolourpaint/control/ - persistent, documentation and non-source code information</text:p>
   <text:p text:style-name="Text_20_body">trunk/KDE/kdegraphics/{doc/,}kolourpaint – current development branch porting to KDE 4 and containing all future feature development. <text:s/>Its only dependency is kdelibs. <text:s/>Obviously, you need Qt and C++ but if you managed to compile kdelibs, you can compile KolourPaint. <text:s/>It takes approximately 6 minutes to compile the 50 thousand lines of source code on a 2.2 GHz system with 256MB RAM, a very slow hard disk and gcc 4.0.</text:p>
   <text:p text:style-name="Text_20_body">branches/KDE/3.5/kdegraphics/{doc/,}kolourpaint – backport branch for KDE 3</text:p>
   <text:p text:style-name="Text_20_body">branches/KDE/3.4/kdegraphics/{doc/,}kolourpaint – obsolete backport branch (only port critical fixes for distros that love old software)</text:p>
   <text:p text:style-name="Text_20_body">branches/KDE/3.3/kdegraphics/{doc/,}kolourpaint – only port critical fixes for distros that love old software)</text:p>
   <text:p text:style-name="Text_20_body">branches/kolourpaint/1.2_kde3/ - dead, standalone release branch for KDE 3.0 (we still need to extract the binary distribution scripts from there, for future standalone releases)</text:p>
   <text:p text:style-name="Text_20_body">branches/kolourpaint/1.0/ - dead, standalone release branch for KDE 3.0</text:p>
   <text:h text:style-name="Heading_20_5" text:outline-level="5">Code Reliability</text:h>
   <text:p text:style-name="Text_20_body">The KDE 3.x versions received full code coverage white-box testing and full functionality testing with black-box testing. <text:s/>This testing was paranoid.</text:p>
   <text:p text:style-name="Text_20_body">This is why the Coverity static code analyser failed to find a single non-false-positive out of more than 50 thousand lines of code.</text:p>
   <text:p text:style-name="Text_20_body">You will not get memory errors in KolourPaint code, except some memory leaks on application termination due to some missing destruction (but this is cleaned up by the OS anyway). <text:s/>However:</text:p>
   <text:list text:style-name="L3">
    <text:list-item>
     <text:p text:style-name="P23">The selection code, combined with undo/redo, is very complicated. <text:s/>It would not be surprising if there was a path that causes a crash (and there is even an unreproduceable bug open) – although a huge number of contrived paths have been tested. <text:s/>We should simplify this code to fix this.</text:p>
    </text:list-item>
    <text:list-item>
     <text:p text:style-name="P23">Large images are poorly handled by Qt (you get memory allocation errors and partial operation completion but no exceptions are thrown – silent failure is bad).</text:p>
    </text:list-item>
    <text:list-item>
     <text:p text:style-name="P23">If the combined size of images in KolourPaint exceeds 2GB on a 32-bit system, the 32-bit <text:span text:style-name="Code_20_Term">int</text:span>&apos;s are likely to overflowed somewhere.</text:p>
    </text:list-item>
   </text:list>
   <text:p text:style-name="Text_20_body">One of the main claims to fame of KolourPaint is its reliability. <text:s/>This is in stark contrast to other opensource projects which have entire <text:span text:style-name="Emphasis">mailing lists</text:span> devoted to crashes.</text:p>
   <text:p text:style-name="Text_20_body">The port to KDE 4.x means that we have to test all of KolourPaint all over again.</text:p>
   <text:h text:style-name="Heading_20_5" text:outline-level="5">Code Readability</text:h>
   <text:p text:style-name="Text_20_body">Code readability affects reliability but it is possible to have unreadable but reliable code.</text:p>
   <text:p text:style-name="Text_20_body">KolourPaint needs a lot of refactoring in places. <text:s/>TODO: details</text:p>
   <text:h text:style-name="Heading_20_4" text:outline-level="4">Coverity</text:h>
   <text:p text:style-name="Text_20_body">Coverity [<text:a xlink:type="simple" xlink:href="http://www.coverity.com/">http://www.coverity.com/</text:a>] is a commercial and expensive static source analyser that finds bugs and false positives. <text:s/>They do free scans of KDE but you need to apply to Coverity for an account to see the results of the scans. <text:s/>Many KDE developers have Coverity accounts, including Clarence Dang <text:span text:style-name="Code_20_Term">&lt;dang AT kde.org&gt;</text:span>.</text:p>
   <text:h text:style-name="Heading_20_4" text:outline-level="4">Sourceforge</text:h>
   <text:p text:style-name="Text_20_body"><text:a xlink:type="simple" xlink:href="http://sourceforge.net/projects/kolourpaint">http://sourceforge.net/projects/kolourpaint/</text:a> is the Sourceforge project. <text:s/>The admin, <text:s/>Clarence Dang <text:span text:style-name="Code_20_Term">&lt;clarencedang AT users.sourceforge.net&gt;</text:span>, can give you access to this.</text:p>
   <text:h text:style-name="Heading_20_5" text:outline-level="5">Website</text:h>
   <text:p text:style-name="Text_20_body">The website is <text:a xlink:type="simple" xlink:href="http://kolourpaint.sourceforge.net/">http://kolourpaint.sourceforge.net/</text:a>. <text:s/>You need a Sourceforge account to modify the webpage via <text:span text:style-name="Code_20_Term">SSH</text:span> at <text:span text:style-name="Code_20_Term">shell.sourceforge.net:/home/groups/k/ko/kolourpaint/htdocs/</text:span>.</text:p>
   <text:p text:style-name="Text_20_body">The website is currently stored on Clarence Dang&apos;s computer using CVS and copied to that path every so often. <text:s/>The HTML is edited directly, although small sections (e.g. <text:span text:style-name="Non-Code_20_Term">Testimonials</text:span> page, download pages&apos; md5sums, <text:span text:style-name="Non-Code_20_Term">Thanks To</text:span> list) are generated from files which are not uploaded and also, some unfinished pages are not uploaded. <text:s/>We should use a CMS instead.</text:p>
   <text:p text:style-name="Text_20_body">ACTION: It would be better if this site was hosted on KDE SVN and maintained by an interested <text:s/>web developer.</text:p>
   <text:p text:style-name="Text_20_body">TODO: mailing lists. <text:s/>k<text:a xlink:type="simple" xlink:href="mailto:Kolourpaint-support@lists.sourceforge.net">olourpaint-support AT lists.sourceforge.net</text:a> and spam trouble. <text:s text:c="3"/>Bugs.kde.org <text:s/>TODO: freshmeat.net (clarencedang AT users.sourceforge.net&gt;) <text:s/>TODO: kde-apps.org &lt;dang AT kde.org&gt;</text:p>
   <text:h text:style-name="Heading_20_4" text:outline-level="4">Domain Name</text:h>
   <text:p text:style-name="Text_20_body"><text:a xlink:type="simple" xlink:href="http://www.kolourpaint.org/">http://www.kolourpaint.org/</text:a> is currently a Namesecure domain that redirects to <text:a xlink:type="simple" xlink:href="http://kolourpaint.sourceforge.net/">http://kolourpaint.sourceforge.net/</text:a>. <text:s/>The registrant is Clarence Dang, who pays for the domain.</text:p>
   <text:p text:style-name="Text_20_body"><text:a xlink:type="simple" xlink:href="http://www.kolourpaint.com/">http://www.kolourpaint.com/</text:a> is registered by Clarence Dang for commercialisation possibilities and to prevent someone else from misrepresenting the project. <text:s/>We are not really concerned about kolourpaint.net, kolourpaint.com.au etc. since they are odd domains anyway while .org and .com are very ordinary.</text:p>
   <text:p text:style-name="Text_20_body">ACTION: It would be better to hide the fact that it redirects as <text:a xlink:type="simple" xlink:href="http://www.kolourpaint.org/">www.kolourpaint.org</text:a> looks more professional.</text:p>
   <text:p text:style-name="Text_20_body">ACTION: Switch away from namesecure since that don&apos;t provide free email forwarding anymore – would like to have <text:span text:style-name="Code_20_Term">&lt;support AT kolourpaint.org&gt;</text:span> - and their email forwarding was unreliable anyway. <text:s/><text:span text:style-name="Code_20_Term">sitelutions.net</text:span> is recommended by David Greenaway.</text:p>
   <text:h text:style-name="Heading_20_3" text:outline-level="3">Discussion</text:h>
   <text:p text:style-name="Text_20_body">Currently only happens between Clarence Dang and Thurston Dang (out of convenience), which is disappointing. <text:s/>ACTION: use kolourpaint-devel mailinglist more.</text:p>
   <text:h text:style-name="Heading_20_2" text:outline-level="2">Versions</text:h>
   <text:h text:style-name="Heading_20_2" text:outline-level="2"><text:reference-mark-start text:name="Licensing"/>Licensing<text:reference-mark-end text:name="Licensing"/></text:h>
   <text:p text:style-name="Text_20_body">KolourPaint is under the BSD license since we want the code to be usable by anyone, for anything. <text:s/>This includes closed-source derivatives but actually, the main motivations are to allow:</text:p>
   <text:list text:style-name="L4">
    <text:list-item>
     <text:p text:style-name="P24">Moving of generic code into an LGPL library (you cannot do this with the GPL if the copyright is diluted and those other copyright holders disappear or stubbornly refuse to relicense)</text:p>
    </text:list-item>
    <text:list-item>
     <text:p text:style-name="P24">Reuse of the code in BSD projects, that don&apos;t agree with GPL licensing (which might be due to either die-hard philosophy and/or Reason 1).</text:p>
    </text:list-item>
   </text:list>
   <text:p text:style-name="Text_20_body">The great thing about the BSD license is that if you don&apos;t agree with it, you can make a fork under the GPL license. <text:s/>In contrast, if you license under the GPL to start with, no one can fork it under the BSD license if they disagree with you.</text:p>
   <text:p text:style-name="Text_20_body">However, the KolourPaint Project will not accept any code contributions that are licensed under anything more restrictive than BSD. <text:s/>MIT/X11 is equivalent to BSD and fine. GPL is too restrictive. <text:s/>LGPL code needs to be isolated in a separate runtime library.</text:p>
   <text:p text:style-name="Text_20_body">Having said, GPL code can be used if it is in a plugin loaded at <text:span text:style-name="Non-Code_20_Term">runtime</text:span> by an LGPL library. <text:s/>This is a good way of working around the GPL as all you need to do is come up with an LGPL wrapper library. <text:s/>Then KolourPaint only needs to link to the LGPL library. <text:s/>Note that this only works with GPLv2 and not GPLv3 (TODO: I only heard that it doesn&apos;t work with GPLv3 by rumour, check whether it really doesn&apos;t work).</text:p>
   <text:p text:style-name="Text_20_body">Contrary to popular belief, the GPL does not prevent closed-source derivatives from being created – at the expense of everyone else and Stallman&apos;s confusingly named <text:span text:style-name="Emphasis">software freedom</text:span> – as long as there is only one copyright holder or all copyright holders conspire together.<text:span text:style-name="Emphasis"> </text:span><text:s/>Qt is a perfect example of this through its QPL/GPL &amp; commerical dual-licensing, where Trolltech, <text:s/>maintains complete copyright control. <text:s/>Another infamous example is ReiserFS.</text:p>
   <text:p text:style-name="Text_20_body"/>
   <text:p text:style-name="P20">Chapter 3</text:p>
   <text:h text:style-name="Heading_20_1" text:outline-level="1">Concepts</text:h>
   <text:p text:style-name="P25">TODO</text:p>
   <text:h text:style-name="P21" text:outline-level="2">Class Diagram</text:h>
   <text:p text:style-name="Text_20_body">TODO</text:p>
   <text:h text:style-name="Heading_20_2" text:outline-level="2">Code Patterns</text:h>
   <text:p text:style-name="Text_20_body">TODO: separate chapter?</text:p>
   <text:p text:style-name="Text_20_body">All kpMainWindow slots in response to user input (e.g. selecting a menu item or toolbar item either by clicking or using a shortcut key), that access (read, write or both) the document, must be prefixed with the following:</text:p>
   <text:p text:style-name="Code">if (toolHasBegunShape ())</text:p>
   <text:p text:style-name="Code"><text:s text:c="4"/>tool ()-&gt;endShapeInternal ();</text:p>
   <text:p text:style-name="Code_20__28_blank_20_line_20_after_20_it_29_"/>
   <text:p text:style-name="Text_20_body">This completes any shape currently being drawn.</text:p>
   <text:p text:style-name="Text_20_body">This is needed so that the following logic in the slot can assume that the shape is not in an intermediate stage of being drag-created by the user.</text:p>
   <text:p text:style-name="Text_20_body">Consider the case where a line is being dragged out and CTRL+I is pressed to invert the image. <text:s/>The CTRL+I invert code (<text:span text:style-name="Code_20_Term">kpMainWindow::slotInvertColors()</text:span>) must force the line to be completed before the invert can meaningfully proceed.</text:p>
   <text:h text:style-name="Heading_20_2" text:outline-level="2">DPI</text:h>
   <text:p text:style-name="Text_20_body">TODO: move into some sort of general (non-KolourPaint) concepts section along with bits of “Paint Engine”</text:p>
   <text:p text:style-name="Text_20_body">An size of a bitmap is commonly given in terms of pixels e.g. 640x480. <text:s/>However, pixels are independent of physical measurements, such as meters or inches, so we have no idea whether our 640x480 image is supposed to be rendered 1cm or 1m wide or high.</text:p>
   <text:p text:style-name="Text_20_body">Therefore, most file formats in addition to storing pixel data, have <text:span text:style-name="Non-Code_20_Term">DPI</text:span> (<text:span text:style-name="Non-Code_20_Term">Dots Per Inch</text:span> or pixels per inch) fields for both the horizontal and vertical components. <text:s/>Normally, both fields are identical but there is no theoretical reason why they need to be.</text:p>
   <text:p text:style-name="Text_20_body">As an example, a 640x480 image with 100 DPI horizontally and 72 DPI vertically is of the following physical dimensions:</text:p>
   <text:p text:style-name="Text_20_body">Width: 640 dots / 100 dots per inch = 6.4 inches</text:p>
   <text:p text:style-name="Text_20_body">Height: 480 dots / 72 dots per inch = 6.67 inches</text:p>
   <text:p text:style-name="Text_20_body">Recall that 1 inch = 2.54 centimeters approximately.</text:p>
   <text:p text:style-name="Text_20_body">The exact same 640x480 image but with 1/10<text:span text:style-name="T1">th</text:span> of the DPI in both directions is much larger physically:</text:p>
   <text:p text:style-name="Text_20_body">Width: 640 dots / 10 dots per inch = 64 inches</text:p>
   <text:p text:style-name="Text_20_body">Height: 480 dots / 7.2 dots per inch = 66.67 inches</text:p>
   <text:h text:style-name="Heading_20_3" text:outline-level="3">Printing</text:h>
   <text:p text:style-name="Text_20_body">This DPI is crucial when printing – without specifying it, the printer has no idea how big 640 pixels should be. <text:s/>The DPI of the image (e.g. 72 DPI) is passed as the <text:span text:style-name="Non-Code_20_Term">logical resolution</text:span> to <text:span text:style-name="Code_20_Term">QPrinter::setResolution()</text:span> (and unfortunately, Qt only supports identical horizontal and vertical DPIs).</text:p>
   <text:p text:style-name="Text_20_body">Most printers can only output exactly 300 or 600 blobs of ink per inch. <text:s/>In other words, their <text:span text:style-name="Non-Code_20_Term">physical resolution</text:span> is 300 or 600 DPI. <text:s/>If the logical resolution is identical to the physical resolution, the printer will use 1 blob of ink per pixel. <text:s/>In reality, this is a simplification because some printers use quality or color cartridge tricks and others don&apos;t use ink, but this is all unimportant to the programmer.</text:p>
   <text:p text:style-name="Text_20_body">If the logical resolution is lower than the physical resolution, the printer will simply use more than 1 blob of ink per pixel. <text:s/>If the physical resolution is not a perfect multiple of the logical resolution, then you may end up with e.g. 1.2 blobs of ink per pixel. <text:s/>This is physically impossible so what happens is that most pixels get 1 blob of ink while every so often, one pixel gets 2 blobs of ink such that it averages out to 1.2 blobs/pixel. <text:s/>The printer has many tricks so this generally looks fine.</text:p>
   <text:p text:style-name="Text_20_body">However, if the logical resolution is higher than the physical resolution (e.g. a high quality digital photo on a low quality printer), the printer would need to somehow e.g. fit 2 pixels into each blob of ink. <text:s/>This is impossible no matter how hard you try. <text:s/>The printer simply cannot do it and you end up with bad quality. <text:s/>The only real way around this is to get a printer with a higher physical resolution or got to an expensive print shop.</text:p>
   <text:p text:style-name="Text_20_body">Versions of KolourPaint prior to 1.4.2_relight ignored the image DPI and simply used the default resolution of QPrinter (72 DPI). <text:s/>Newer versions respect the image DPI unless the image would be too large to fit on paper, in which case, it overrides the DPI so that it fits while being as large as possible and maintaining aspect ratio. <text:s/>Note that we override the DPI instead of scaling the image&apos;s pixels as such scaling (esp. if the image were to get smaller and pixels were to be dropped) would automatically reduce and cap the quality of the printout – we would rather send the original set of pixels to the printer for the printer to scale, in the almost certain case that it can do a better job. <text:s/>See <text:span text:style-name="Code_20_Term">kpMainWindow::slotPrint()</text:span>.</text:p>
   <text:h text:style-name="Heading_20_3" text:outline-level="3">Displaying on the screen</text:h>
   <text:p text:style-name="Text_20_body">Because KolourPaint is supposed to be used to edit images on a pixel level, every image pixel is displayed as one screen pixel. <text:s/>In other words, the image&apos;s DPI fields are ignored and the screen&apos;s DPI is used instead. <text:s/>So the size of the image as displayed by KolourPaint on the screen is almost certainly not going to be the size of the image when printed.</text:p>
   <text:p text:style-name="Text_20_body">What is the DPI of the screen? <text:s/>It depends on the current resolution and the physical size of the screen (as measured by a ruler). <text:s/>For instance, at a resolution of 1024x768 (note the abuse and overloading of the term “resolution” here to “mean number of pixels”, instead of “number of pixels per inch”) if your screen is 10.24in x 7.68in:</text:p>
   <text:p text:style-name="Text_20_body">Horizontal DPI = 1024 dots / 10.24 inches = 100 dots per inch</text:p>
   <text:p text:style-name="Text_20_body">Vertical DPI = 768 dots / 7.68 inches = 100 dots per inch</text:p>
   <text:p text:style-name="Text_20_body">The display driver can return the screen DPI by looking up a monitor database. <text:s/>Under X11, you can run the <text:span text:style-name="Code_20_Term">xdpyinfo</text:span> command or equivalently, the <text:span text:style-name="Code_20_Term">kinfocenter</text:span> command to read this value. </text:p>
   <text:p text:style-name="Text_20_body">Unfortunately, the monitor database is frequently wrong or worse still, the DPI is hardcoded (usually as 72x72, 75x75, 96x96 or 100x100). <text:s/>Luckily, this is unimportant as this apparent DPI value is not used when displaying images – like KolourPaint, most applications simply assign one image pixel to each screen pixel..</text:p>
   <text:p text:style-name="Text_20_body">The real problem of an incorrect DPI, reported by the display driver, is text. <text:s/>Text is not like images as these days, it is described as mathematical shapes (with infinite resolution) and its size is always described in physical measurements – points. <text:s/>A point is always 1/72 inch. <text:s/>However, as the graphics card speaks in pixels, unlike a printer, the software text engine must translate from points to pixels, using the reported display DPI. <text:s/>For instance, if the driver thinks the screen is 72 DPI and we want to render a 10pt font, it will be rasterised as:</text:p>
   <text:p text:style-name="Text_20_body">72 dots per inch * (10 points * 1/72) inches = 10 pixels</text:p>
   <text:p text:style-name="Text_20_body">If we were to measure the rendered font with a ruler, it would really be (10 * 1/72) inches. <text:s/>However, if the display driver was wrong and the screen was actually 144 DPI (72 * 2), the ruler would find that it is only half the intended physical size (10 * 1/72 / 2 inches). <text:s/>This is why having a correct DPI is so important.</text:p>
   <text:p text:style-name="Text_20_body">When a word processor renders text onto the screen, it does a very bad job, with few pixels per points, due to the limited resolution of the screen (e.g. 100 DPI). <text:s/>It uses hinting and antialiasing tricks to minimise the effect of low resolution.</text:p>
   <text:p text:style-name="Text_20_body">However, when it prints, it queries the printer driver for the resolution of the printer and then prints at that high resolution (e.g. 600DPI) with many ink blobs per point. <text:s/>Therefore, printed text almost always looks better than text displayed on screen.</text:p>
   <text:p text:style-name="Text_20_body">Printing to a file (e.g. postscript) in a word processor, before sending that file to a printer may be a bad idea because it means the text cannot be rendered at the resolution of the printer since it could be printed on any printer. <text:s/>The word processor, in this case, defaults to some high DPI, such as 600 DPI, but this is not optimal if your printer supports a higher DPI.</text:p>
   <text:p text:style-name="Text_20_body">If one were to write text on top of an image in KolourPaint, what DPI is used to rasterise the text? <text:s/>Strictly speaking, we should use the DPI of the image. <text:s/>Currently, we use the DPI of the screen with the nasty side effect of text being rendered in more or less pixels depending on the apparent DPI of whatever screen you are currently using.</text:p>
   <text:p text:style-name="Text_20_body">Drawing text in any paint program, or taking a screenshot of text in a word processor, and printing that almost always results in horribly low quality compared to printing text from a word processor. <text:s/>This is because the text has been rasterised at the DPI of the screen, which is usually much lower than that of a printer.</text:p>
   <text:p text:style-name="Text_20_body">The zoom levels, in KolourPaint, are relative to the screen DPI. <text:s/>A 100% zoom means that one image pixel is displayed per screen pixel. <text:s/>A 50% zoom means that two image pixels are displayed per screen pixel (this looks bad as every second image pixel must be thrown away). <text:s/>A 200% zoom means that one image pixel is displayed as two screen pixels.</text:p>
   <text:p text:style-name="Text_20_body">You can get KolourPaint to display the image using the image&apos;s DPI, instead of the screen&apos;s, by using the Print Preview feature. <text:s/>This will be displayed at the same physical size as if it were to be printed, assuming the display driver knows the correct screen DPI to do the translation between the image DPI and the screen DPI. <text:s/>If the image DPI exceeds the screen&apos;s DPI, this will look horrible – the printout will usually look better as the printer has much higher DPI than the screen.</text:p>
   <text:h text:style-name="Heading_20_2" text:outline-level="2">Paint Engine</text:h>
   <text:p text:style-name="Text_20_body">TODO: diagram of graphics client &amp; CPU &amp; memory vs graphics server &amp; graphics card</text:p>
   <text:p text:style-name="Text_20_body">Normally programs are run on a local computer. <text:s/>However, the X11 protocol permits program logic to be executed on a remote computer (the network server, misleading known as the <text:span text:style-name="Non-Code_20_Term">graphics client</text:span>) and displayed on the local computer (the network client, misleading known as the <text:span text:style-name="Non-Code_20_Term">graphics server</text:span>). <text:s/>For the purposes of this document, when we say server, we mean graphics server and when we say client, we mean graphics client. <text:s/>These are the opposite meanings to the network version of these terms.</text:p>
   <text:p text:style-name="Text_20_body">While this separation seems rather silly and not often used, this actually makes us think a bit harder about the separation between the graphics card, graphics memory, GPU &amp; monitor <text:s/>(graphics server) and main memory and the CPU (graphics client).</text:p>
   <text:p text:style-name="Text_20_body">In the case that the program is executed locally, the hardware bus separates the client and server. <text:s/>This is far slower than main and graphics memory and so shifting data between the client and server must be minimised.</text:p>
   <text:p text:style-name="Text_20_body">If the program is executed remotely, a network of much higher latency could separate the client and server and so this becomes paramount.</text:p>
   <text:p text:style-name="Text_20_body">A color model is a way of representing a subset of all possible human-visible colors e.g. Indexed RGB, RGB, RGBA, CMYK and XYZ. <text:s/>Any color model can be represented in a device-independent format (i.e. at full quality) on the client in main memory. <text:s/>The graphics memory on the server supports a limited number of color models (at least RGB) at the current display depth. <text:s/>Furthermore, this depth could be 8-bit or even 1-bit so could be very low quality. <text:s/>This means that unless the server can support the document&apos;s color model, we must not store the document in graphics memory. <text:s/>Worse still, some servers such as VNC servers, seem to corrupt/approximate graphics memory so even with a color model match, we can still lose document information.</text:p>
   <text:p text:style-name="Text_20_body">TODO: more on indexed vs truecolor</text:p>
   <text:p text:style-name="Text_20_body">Therefore, we must store document data in main memory. <text:s/>Every time we change the document we must move it from main memory (client) to graphics memory (server). <text:s/>We cannot do separate drawing operations on main memory and graphics memory as there is no guarantee that, for instance, the graphics card will draw lines in graphics memory, the same way we draw in main memory. <text:s/>This is slow because it crosses the bus or the network.</text:p>
   <text:p text:style-name="Text_20_body">However, if you are <text:span text:style-name="Non-Code_20_Term">certain</text:span> of the way the server stores image data, you can store images of arbitrary depth if you encoded them cleverly. <text:s/>For example, if the graphics memory only supports 8-bit channels, you can still store 16-bit channels by using pairs of pixels to represent single document pixels. <text:s/>This makes sense for something like OpenGL because you can then then program the highly parallel shader hardware to perform arbitrary transformations very rapidly. <text:s/>This is hundreds or thousands of times faster than the CPU and also avoids the bus crossing. <text:s/>A complication is that shader access usually requires binary graphics drivers, which many distributions do not ship by default because they are “non-free”.</text:p>
   <text:p text:style-name="Text_20_body">The graphics card almost certainly supports limited color space conversion (e.g. 32-bit RGBA to 16-bit RGBA), zooming and rotation, and performs these near instantly. <text:s/>We should almost certainly use these capabilities instead of burdening the CPU which performs these operations hundreds or thousands of times slower. <text:s/>A popular and portable interface to this hardware is OpenGL. <text:s/>Qt does not provide such an interfaces and performs all this in software resulting in abysmal performance. <text:s/>TODO: this may have changed with Qt4 since it has an OpenGL drawing buffer so might do the hardware color space conversion for instance (e.g. <text:span text:style-name="Code_20_Term">Qpainter::drawImage(QImage,...)</text:span> might not call the software <text:span text:style-name="Code_20_Term">QPixmap::convertToImage()</text:span> anymore). <text:s/>However, if you must use the CPU, SIMD assembler instructions (MMX, SSE, SSE2 etc.) can be used for performance.</text:p>
   <text:p text:style-name="Text_20_body">In the beginning, KolourPaint used Qt3 without this hardware acceleration. <text:s/>Storing the document in main memory (<text:span text:style-name="Code_20_Term">QImage</text:span>) and converting it to the format for graphics memory (<text:span text:style-name="Code_20_Term">QPixmap</text:span>) <text:s/>using the software <text:span text:style-name="Code_20_Term">QPixmap::convertToImage()</text:span> was – and still is – too slow (from memory, about 100ms to convert a 1024x768x32 image for display on a screen with a matching color model on a Celeron 2.2 Ghz!).</text:p>
   <text:p text:style-name="Text_20_body">Therefore, for acceptable performance, <text:reference-mark-start text:name="Doc stored as QPixmap"/>KolourPaint stored the document directly in graphics memory (<text:span text:style-name="Code_20_Term">QPixmap</text:span>)<text:reference-mark-end text:name="Doc stored as QPixmap"/>.</text:p>
   <text:p text:style-name="Text_20_body">Therefore any document that does not match the screen&apos;s color model is corrupted. <text:s/>Actually, it&apos;s worse than that because we also convert all indexed images to RGB, even on an indexed 8-bit display. <text:s/>TODO: check this last bit.</text:p>
   <text:p text:style-name="Text_20_body">Worse still, QPainter&apos;s behavior on <text:span text:style-name="Code_20_Term">QPixmap</text:span>&apos;s changed from Qt3 to Qt4 and whether or not XRENDER is supported by the display.</text:p>
   <text:p text:style-name="Text_20_body">ACTION: We must change this for KDE 4 to stop corrupting the user&apos;s data. <text:s/>We need a graphics library that can modify images in arbitrary color models (to at least support RGBA and indexed RGBA color models) stored in main memory. <text:s/>We cannot use Krita&apos;s code as that is GPL [p<text:reference-ref text:reference-format="page" text:ref-name="Licensing">16</text:reference-ref>, Chapter <text:reference-ref text:reference-format="chapter" text:ref-name="Licensing">2.5</text:reference-ref>]. <text:s/>This is quite sad because as more code is added to Krita, software developers are further denied the freedom to reuse such code under licenses such as the LGPL and BSD.</text:p>
   <text:p text:style-name="Text_20_body">We can then use OpenGL for hardware accelerated color space conversion.</text:p>
   <text:p text:style-name="Text_20_body">TODO: describe stop gap Qt4 <text:span text:style-name="Code_20_Term">QPixmap</text:span> solution without alpha channel. <text:s/>Look at <text:span text:style-name="Code_20_Term">svn log</text:span> and blog and <text:span text:style-name="Code_20_Term">imagelib/kppainter.h</text:span> comments.</text:p>
   <text:h text:style-name="Heading_20_2" text:outline-level="2">Entry Point</text:h>
   <text:p text:style-name="Text_20_body"><text:span text:style-name="Code_20_Term">kolourpaint.cpp:main() </text:span>initializes KolourPaint and creates a whole bunch of <text:span text:style-name="Code_20_Term">kpMainWindow</text:span>&apos;s.</text:p>
   <text:h text:style-name="Heading_20_2" text:outline-level="2">Main Window</text:h>
   <text:p text:style-name="Text_20_body">Source code stored in <text:span text:style-name="Code_20_Term">mainwindow/</text:span> folder. <text:s/>Is a monster-sized class.</text:p>
   <text:p text:style-name="Text_20_body">Far, too often main window pointers are passed around everywhere (since given a pointer to a main window, you can get a pointer to anything else). <text:s/>Unfortunately, this means that tools and commands are tied to the GUI. <text:s/>Worse still, we cannot have 2 main windows viewing the same document. <text:s/>ACTION: Change tools to use a <text:span text:style-name="Code_20_Term">kpToolEnvironment</text:span> interface and commands to use a <text:span text:style-name="Code_20_Term">kpCommandEnvironment</text:span>.</text:p>
   <text:p text:style-name="Text_20_body">The <text:span text:style-name="Code_20_Term">kpmainwindow_statusbar.cpp</text:span> tries very hard to ensure that the status bar contains the correct text. <text:s/>Far too many other KDE applications allow some status bar text to be, for instance, wiped by a temporary notice and never re-appear. <text:s/>KolourPaint does this right.</text:p>
   <text:p text:style-name="Text_20_body">ACTION: However, the implementation is too concrete and should be converted into a general status bar update pattern that can be pushed into <text:span text:style-name="Code_20_Term">kdelibs</text:span>. <text:s/>Different objects, say the view, could indicate things that affect that status bar, say the zoom level.</text:p>
   <text:h text:style-name="Heading_20_2" text:outline-level="2">Views</text:h>
   <text:p text:style-name="Text_20_body">The source code is stored in the views/ folder. <text:s/>There can be 1 or more views per <text:span text:style-name="Code_20_Term">kpDocument </text:span>document.</text:p>
   <text:p text:style-name="Text_20_body">ACTION: These classes are badly designed because subclasses limit functionality instead of increasing it. <text:s/>We need to tip the inheritance hierarchy upside-down. </text:p>
   <text:p text:style-name="Text_20_body">TODO: class diagram</text:p>
   <text:h text:style-name="Heading_20_2" text:outline-level="2">Commands and Undo/Redo</text:h>
   <text:p text:style-name="Text_20_body">Changes must not be made to the document directly using the document class. <text:s/>You must encapsulate each change in a <text:span text:style-name="Code_20_Term">kpCommand</text:span> so that it is undoable and redoable. <text:s/>Failure to do this results in inconsistent behaviour when undoing and redoing.</text:p>
   <text:p text:style-name="Text_20_body">Interestingly, the <text:span text:style-name="Non-Code_20_Term">Color Picker</text:span> is undo-able and redo-able even though it does not affect the document<text:span text:style-name="Non-Code_20_Term">.</text:span> <text:s/>This is because we want to protect the user&apos;s hard work looking for a particular needle color in the image haystack. <text:s/>We may want to rethink this in the future as making something a command has a nasty side effect with linear command histories, as we now discuss.</text:p>
   <text:p text:style-name="Text_20_body">Suppose, under KolourPaint&apos;s linear command history (which is similar to Konqueror&apos;s Back / Forward buttons and KWrite&apos;s Undo/Redo), one has performed the Line, Circle and Rectangle commands. <text:s/>Undoing would remove the rectangle. <text:s/>Undoing again would remove the circle. <text:s/>Undoing yet again would remove the line. <text:s/>However, it&apos;s possible to “undo the undo” and return to the states before we undid anything. <text:s/>If we now redo, we traverse the command history in the opposite direction: a redo recreates the line, a second redo recreates the circle and a third redo recreates the rectangle.</text:p>
   <text:p text:style-name="Text_20_body">The problem is suppose we had pressed undo those 3 times. <text:s/>If we were now to do something that adds a command to the history e.g. draw a different line, draw a polygon or use the Color Picker, the redo history is cleared. <text:s/>It is not possible to redo the Line, Circle or Rectangle commands by pressing <text:span text:style-name="Emphasis">any</text:span> combination of undo and redo. <text:s/>A tree-like command history would solve this problem but would probably add quite some UI complexity and memory footprint.</text:p>
   <text:p text:style-name="Text_20_body">Many command classes are quite similar, so in the future, we might merge some of the classes e.g. <text:span text:style-name="Code_20_Term">kpToolPolygonalCommand</text:span> and <text:span text:style-name="Code_20_Term">kpToolRectangularCommand</text:span>.</text:p>
   <text:p text:style-name="Text_20_body">TODO: kpCommand is similar to KCommand except for the size() method; kpMacroCommand is similar to KMacroCommand; kpCommandHistory is similar to KCommandHistory except for more sophisticated clipping based on size and a hacky interface for accessing the commands in the history directly (TODO: why? <text:s/>It had something to do with undoing and redoing selections – we should cover selections and undo history in detail). <text:s/>Eventually, all this should be pushed into kdelibs.</text:p>
   <text:p text:style-name="Text_20_body">This section covers the external interface to command classes, usually invoked by tool classes, and the internals so that you can understand the implementation of a command class.</text:p>
   <text:h text:style-name="Heading_20_3" text:outline-level="3">External</text:h>
   <text:p text:style-name="Text_20_body">In this section, we highlight the difference between command classes that do not need <text:span text:style-name="Non-Code_20_Term">finalization</text:span> and those that do.</text:p>
   <text:p text:style-name="Text_20_body">Some command classes are considered to be complete after construction, such as the image effect and transform commands.</text:p>
   <text:p text:style-name="Text_20_body">Other command classes (esp. the ones corresponding to tools) are constructed at the start of a shape drag and methods are called to update the command as the drag progresses e.g. k<text:span text:style-name="Code_20_Term">pToolFlowCommand</text:span> for brushes, pens and erasers. <text:s/>Commonly, these classes have a <text:span text:style-name="Code_20_Term">finalize() </text:span>method which must be called at the end of the drag, before adding the command to the command history or if the drag is cancelled, before deleting the command.</text:p>
   <text:p text:style-name="Text_20_body">For instance, <text:span text:style-name="Code_20_Term">finalize()</text:span> might crop the saved image to the dirty rectangle or disable a timer. <text:s/>Failure to call <text:span text:style-name="Code_20_Term">finalize()</text:span> results in undefined behaviour such as redoing not working (due to a saved image not be cropped) or crashes (due to the timer firing when the drag is no longer active). <text:s/>ACTION: this is bad class design and finalize() should be called automatically.</text:p>
   <text:h text:style-name="Heading_20_3" text:outline-level="3">Internal</text:h>
   <text:p text:style-name="Text_20_body">In this section, we describe the implementation of command classes derived from the <text:span text:style-name="Code_20_Term">kpCommand</text:span> base class.</text:p>
   <text:p text:style-name="Text_20_body"><text:span text:style-name="Code_20_Term">name()</text:span> should be the name of the corresponding tool e.g. “Line” or “Curve”. <text:s/>If the selection was involved, you should prepend “Selection: “ (note the trailing space) to the name (e.g. “Selection: Reduce to Grayscale”) instead of “Reduce to Grayscale” (which is for if the entire image was changed).</text:p>
   <text:p text:style-name="Text_20_body"><text:span text:style-name="Code_20_Term">size()</text:span> is used for the purposes of clipping the command history to keep KolourPaint memory usage sane.</text:p>
   <text:p text:style-name="Text_20_body"><text:span text:style-name="Code_20_Term">execute()</text:span> and <text:span text:style-name="Code_20_Term">unexecute()</text:span> are usually called by <text:span text:style-name="Code_20_Term">kpCommandHistory</text:span> in response to the user triggering the redo and undo actions, respectively.</text:p>
   <text:p text:style-name="Text_20_body"><text:span text:style-name="Code_20_Term">execute()</text:span> should store a copy of the area of the document that will be modified and then actually modify the document e.g. draw the line. <text:s/>Note that this copy is not normally stored in the constructor to save memory: consider the case after a user undoes a command – we simply do not need that copy at the moment as the document has not been modified.</text:p>
   <text:p text:style-name="Text_20_body"><text:span text:style-name="Code_20_Term">unexecute()</text:span> should restore that area of the document and erase the copy, to save memory. <text:s/>If it is an invertible operation (e.g. Invert or Flip), you can actually avoid storing a copy of the dirty area in <text:span text:style-name="Code_20_Term">execute()</text:span> and simply apply the operation again. <text:s/>Although this is slower, we value memory rather than performance, for a larger command history (see <text:span text:style-name="Code_20_Term">size()</text:span> above).</text:p>
   <text:p text:style-name="Text_20_body">In both <text:span text:style-name="Code_20_Term">execute()</text:span> and <text:span text:style-name="Code_20_Term">unexecute()</text:span>, for a command created by a non-drag operation (e.g. Image effects), <text:span text:style-name="Code_20_Term">Qt::WaitCursor</text:span> should be used as the operation usually takes quite some time – see the <text:s/><text:span text:style-name="Code_20_Term">kpSetOverrideCursorSaver</text:span> class. <text:s/>We don&apos;t use wait cursors for drag operations (e.g. lines) as they are usually fast to render and the cursor flicker is distracting. <text:s/>Of course, this is not a hard rule.</text:p>
   <text:h text:style-name="Heading_20_2" text:outline-level="2">Tools</text:h>
   <text:p text:style-name="Text_20_body">PICTURE</text:p>
   <text:p text:style-name="Text_20_body">The view [CITE] forwards events unchanged to the current tool. <text:s/>The tool events lifecycle is as follows:</text:p>
   <text:p text:style-name="Text_20_body">All tools&apos; constructors are called at program startup. <text:s/>Each tool creates its <text:span text:style-name="Code_20_Term">KAction</text:span>. <text:s/>Each tool is placed into the Tool Box [CITE].</text:p>
   <text:p text:style-name="Text_20_body">When a tool is selected, its <text:span text:style-name="Code_20_Term">begin()</text:span> method is called. <text:s/>This displays the option widgets [CITE] (and connects their signals to slots to track option changes), changes the cursor, changes the statusbar message and performs other tool-specific initialisation. <text:s/>When a tool is deselected, its <text:span text:style-name="Code_20_Term">end()</text:span> method is called to do the reverse. <text:s/><text:span text:style-name="Code_20_Term">hasBegun()</text:span> returns true in between <text:span text:style-name="Code_20_Term">begin()</text:span> and <text:span text:style-name="Code_20_Term">end()</text:span>.</text:p>
   <text:p text:style-name="Text_20_body"><text:span text:style-name="Code_20_Term">globalDraw()</text:span> is called when the user double clicks on the tool in the Tool Box. <text:s/><text:span text:style-name="Code_20_Term">reselect()</text:span> is called if the user clicks on an already-selected tool.</text:p>
   <text:p text:style-name="Text_20_body">When a mouse button is pressed (TODO: keyboard shortcuts), <text:span text:style-name="Code_20_Term">hasBegunDraw()</text:span> returns true and <text:span text:style-name="Code_20_Term">m_mouseButton</text:span> is set to 0 for the left button and 1 for the right button. <text:s/>This results in the idiom <text:span text:style-name="Code_20_Term">1 – mouseButton ()</text:span> which returns the mouse button <text:span text:style-name="Emphasis">not</text:span> being pressed. <text:s/><text:span text:style-name="Code_20_Term">m_shiftPressed</text:span>, <text:span text:style-name="Code_20_Term">m_controlPressed</text:span> and <text:span text:style-name="Code_20_Term">m_altPressed</text:span> reflect the state of the keyboard modifiers. <text:s/><text:span text:style-name="Code_20_Term">m_startPoint</text:span> contains the document coordinate of the mouse. <text:s/><text:span text:style-name="Code_20_Term">beginDraw()</text:span> is called. <text:s/>Generally, the left button draws in the <text:span text:style-name="Code_20_Term">foregroundColor()</text:span> and the right button draws in the <text:span text:style-name="Code_20_Term">backgroundColor()</text:span> but this is up to the tool. <text:s/>The middle mouse button pastes text from the clipboard.</text:p>
   <text:p text:style-name="Text_20_body">TODO: maybe we want a table of the above properties rather than text paragraph?</text:p>
   <text:p text:style-name="Text_20_body">Immediately after <text:span text:style-name="Code_20_Term">beginDraw()</text:span> is called, <text:span text:style-name="Code_20_Term">draw()</text:span> will be called. <text:s/>As long as the mouse stays down, <text:span text:style-name="Code_20_Term">draw()</text:span> is also called every time the mouse is dragged, a keyboard modifier is changed or for any other update KolourPaint feels like. <text:s/>While <text:span text:style-name="Code_20_Term">m_startPoint</text:span> will be unchanged from <text:span text:style-name="Code_20_Term">beginDraw()</text:span>, <text:span text:style-name="Code_20_Term">m_currentPoint</text:span> will be modified to reflect the current document coordinate of the mouse and <text:span text:style-name="Code_20_Term">m_currentViewPoint</text:span> will be the current view coordinate. <text:s/><text:span text:style-name="Code_20_Term">m_lastPoint</text:span> will be the value of <text:span text:style-name="Code_20_Term">m_startPoint</text:span> on the previous call to <text:span text:style-name="Code_20_Term">draw()</text:span> or <text:span text:style-name="Code_20_Term">(-1,-1)</text:span> if this is the first call to <text:span text:style-name="Code_20_Term">draw()</text:span> after <text:span text:style-name="Code_20_Term">beginDraw()</text:span>. <text:s/>Note that <text:span text:style-name="Code_20_Term">(-1,-1)</text:span> is always an invalid document coordinate for a start point (after all, how could you possibly click there?) but is valid for the current point (you could drag to there). Note that these variables are also valid during <text:span text:style-name="Code_20_Term">beginDraw()</text:span>.</text:p>
   <text:p text:style-name="Text_20_body">For most tools, <text:span text:style-name="Code_20_Term">draw()</text:span> will create a <text:span text:style-name="Code_20_Term">kpTempPixmap</text:span> containing the shape being drawn and send it to the view manager [CITE] to display as a temporary layer on top of the document.</text:p>
   <text:p text:style-name="Text_20_body">After releasing the mouse button, <text:span text:style-name="Code_20_Term">endDraw()</text:span> is called, the drag is considered complete and hasBegunDraw() returns false. <text:s/><text:span text:style-name="Code_20_Term">endDraw()</text:span> should erase the <text:span text:style-name="Code_20_Term">kpTempPixmap</text:span> and add the command to the command history, committing the shape-drawing operation.</text:p>
   <text:p text:style-name="Text_20_body">Instead of releasing the mouse button that initiated the drag, the user may press the other mouse button while the initiating mouse button is still held down. <text:s/><text:span text:style-name="Code_20_Term">cancelShape()</text:span> is called to cancel the operation – it should erase the <text:span text:style-name="Code_20_Term">kpTempPixmap</text:span> but not commit to the command history. <text:s/></text:p>
   <text:p text:style-name="Text_20_body"><text:span text:style-name="Code_20_Term">releasedAllButtons()</text:span> is called when no mouse buttons are no longer held. <text:s/>This is for updating the status bar message. <text:s/>Consider the case where <text:span text:style-name="Code_20_Term">beginDraw()</text:span> has been called due to a left mouse press. <text:s/>If the right mouse button is then pressed, while still holding down the left, <text:span text:style-name="Code_20_Term">cancelShape()</text:span> will be called. <text:s/>But after that, as long as at least one button remains depressed, no matter what buttons are pressed or released, no drawing methods are called. <text:s/>Only after all buttons are released, will <text:span text:style-name="Code_20_Term">releasedAllButtons()</text:span> be called and the tool starts recognising events again.</text:p>
   <text:p text:style-name="Text_20_body"><text:span text:style-name="Code_20_Term">hover()</text:span> is called when the mouse is moved over the view but differs from <text:span text:style-name="Code_20_Term">draw()</text:span>, in that <text:span text:style-name="Code_20_Term">hover()</text:span> is only called outside of a draw operation i.e. when <text:span text:style-name="Code_20_Term">hasBegunDraw()</text:span> returns false and equivalently, when no buttons being pressed.</text:p>
   <text:p text:style-name="Text_20_body">A shape that is not constructed from a single drag (such as a polygon; TODO: explain while selections use this) can use an extension of the drawing “pattern”. <text:s/>By implementing hasBegunShape(), beginShape() and endShape(). <text:s/>This abstraction is necessary at the kpTool level to ensure that endDraw() is called, if needed before endShape() and endShape() is automatically called before end(). <text:s/>TODO: expand</text:p>
   <text:p text:style-name="Text_20_body">TODO: statusbar message – when call?</text:p>
   <text:p text:style-name="Text_20_body"><text:span text:style-name="Code_20_Term">setUserMessage()</text:span> sets the string to be displayed as the first field in the statusbar, which gives the user instructions on what to do next e.g. “Curve: Drag out the start and end points” or “Curve: Left drag to set the first control point or right click to finish”. <text:s/>This can be empty but never should be because instructions should always be available.</text:p>
   <text:p text:style-name="Text_20_body"><text:span text:style-name="Code_20_Term">setUserShapePoints()</text:span> can be passed 0, 1 and 2 points and this determines what is displayed in the second field of the statusbar:</text:p>
   <text:p text:style-name="Text_20_body">0 points: mouse is outside of all views, display nothing</text:p>
   <text:p text:style-name="Text_20_body">1 point: mouse is moving inside view or drawing with a flow tool (e.g. Pen), show that the currrent point</text:p>
   <text:p text:style-name="Text_20_body">2 points: user is dragging out a shape from a start point to and end point, show these 2 points separated by a dash e.g. the start and end points of a line. <text:s/>This automatically calls <text:span text:style-name="Code_20_Term">setUserShapeSize()</text:span> with the calculated size of the shape with these points (can have negative components for a left and/or up drag). <text:s/>You can disable this automatic call by disabling the <text:span text:style-name="Code_20_Term">setSize </text:span>argument. <text:s/>ACTION: document setSize in .h</text:p>
   <text:p text:style-name="Text_20_body"><text:span text:style-name="Code_20_Term">setUserShapeSize()</text:span> is passed the size of the current drag (can have negative components for a left and/or up drag) and is displayed in the third field. <text:s/>If this is <text:span text:style-name="Code_20_Term">KP_INVALID_SIZE</text:span>, no drawing is happening and it displays nothing. <text:s/>Note that <text:span text:style-name="Code_20_Term">QSize()</text:span> is not <text:span text:style-name="Code_20_Term">KP_INVALID_SIZE</text:span> as <text:span text:style-name="Code_20_Term">QSize()</text:span> is actually a legal size (0x0; TODO: check).</text:p>
   <text:p text:style-name="Text_20_body">TODO: keep track of color changes etc.</text:p>
   <text:p text:style-name="Text_20_body">TODO: draw() not called at endDraw() - causes problems at least with polygon</text:p>
   <text:h text:style-name="Heading_20_2" text:outline-level="2">Selections</text:h>
   <text:p text:style-name="Text_20_body">KolourPaint&apos;s selections are similar to those in text editors and are a primitive version of layers found in other image programs. <text:s/>When a selection is active, all editing must be done on the selection and not the main image below (with the notable exception of being able to resize the image below). <text:s/>Before editing can continue on the image below, the selection must either be deleted or pushed onto the image below.</text:p>
   <text:p text:style-name="Text_20_body"><text:span text:style-name="Code_20_Term">kpselection.cpp</text:span> contains the <text:span text:style-name="Code_20_Term">kpSelection</text:span> data structure for selections. <text:s/>Selections are per-document (<text:span text:style-name="Code_20_Term">kpDocument</text:span>). <text:s/>However, the rendered borders are per-view-manager (<text:span text:style-name="Code_20_Term">kpViewManager</text:span>) and code is also spread in the view (<text:span text:style-name="Code_20_Term">kpView</text:span>). <text:s/>This original idea for splitting selection concerns between the document and the view classes was so that the selection border would be the same size regardless of the zoom level, as it would be expressed in view pixels, not document pixels. <text:s/>ACTION: We have yet to actually implement this.</text:p>
   <text:p text:style-name="Text_20_body">ACTION: group code together like an aspect.</text:p>
   <text:p text:style-name="Text_20_body">Selections in KolourPaint result in amazingly complicated code because selection commands are individually undoable and redoable. <text:s/>For instance, if you were to select an area of the image, move that selection, scale that selection and then move that selection again, each of these 3 commands would be in the command history and KolourPaint would remember the selection border for each. <text:s/>In contrast, with other paint programs, all 3 selection commands would be grouped into 1. <text:s/>Worse still, undoing would leave you in the state before selecting the area and redoing after that would leave you in the state after the selection is pushed down, after those 3 manipulations. <text:s/>You do not have an active selection anymore – you have lost the selection border.</text:p>
   <text:p text:style-name="Text_20_body">KolourPaint selections can be either:</text:p>
   <text:list text:style-name="L5">
    <text:list-item>
     <text:p text:style-name="P26">Shapes: rectangles, ellipses or polygons</text:p>
    </text:list-item>
    <text:list-item>
     <text:p text:style-name="P26">Text (in a rectangular box)</text:p>
    </text:list-item>
   </text:list>
   <text:p text:style-name="Text_20_body">ACTION: split <text:span text:style-name="Code_20_Term">kpSelection</text:span> into subclasses for rectangular, elliptical selections etc.</text:p>
   <text:p text:style-name="Text_20_body">ACTION: somehow combine with <text:span text:style-name="Code_20_Term">kpTempPixmap</text:span>, which is a per-view-manager concept for storing the currently drawn non-selection shape (e.g. a line).</text:p>
   <text:p text:style-name="Text_20_body">ACTION: generalise into a layer class.</text:p>
   <text:p text:style-name="Text_20_body">Note that transparency in all types of selections means that the transparent bits of the selection will not affect the part of the document it is floating on top of (they <text:span text:style-name="Non-Code_20_Term">paint</text:span> on top of the document). <text:s/>This is in contrast to drawing tools (e.g. Line) which really set document pixels to the transparent color (they <text:span text:style-name="Non-Code_20_Term">set</text:span> document pixels).</text:p>
   <text:h text:style-name="Heading_20_3" text:outline-level="3">Shapes</text:h>
   <text:p text:style-name="Text_20_body">Shape selections contain a number of document pixels inside and on the border of the shape. <text:s/>Note that some of these pixels may be transparent as the document happened to be transparent there. <text:s/>In contrast, all pixels outside of the border are always set to transparent.</text:p>
   <text:p text:style-name="Text_20_body">Now, consider as an example, a mask of an elliptical selection:</text:p>
   <text:p text:style-name="Text_20_body">The opaque pixels of this mask are inside or on the border of the ellipse and therefore refer to document pixels in the selection. <text:s/>Importantly, there is nothing saying that these documents pixels are either transparent or opaque – an opaque portion of the mask does not mean an opaque document pixel.</text:p>
   <text:p text:style-name="Text_20_body">Similarly, the transparent pixels of this mask are outside of the ellipse and therefore refer to transparent pixels (TODO: clarify that these latter pixels are due to pulling behavior) inside the bounding rectangle of the selection but outside of the selection shape.</text:p>
   <text:h text:style-name="Heading_20_4" text:outline-level="4">Selection Transparency</text:h>
   <text:p text:style-name="Text_20_body">To complicate matters, selections have a concept of <text:span text:style-name="Non-Code_20_Term">selection transparency </text:span>(class <text:span text:style-name="Code_20_Term">kpSelectionTransparency</text:span>). <text:s/>When we say an <text:span text:style-name="Non-Code_20_Term">transparent selection</text:span>, we mean that the selection&apos;s selection transparency is set to transparent – we say nothing about the document pixels covered by the selection. <text:s/>Similarly, when we say an <text:span text:style-name="Non-Code_20_Term">opaque selection</text:span>, we mean that the selection&apos;s selection transparency is set to opaque – we say nothing about the document pixels covered by the selection.</text:p>
   <text:p text:style-name="Text_20_body">In an <text:span text:style-name="Non-Code_20_Term">opaque selection</text:span>, selection transparency does nothing. <text:s/>In a <text:span text:style-name="Non-Code_20_Term">transparent selection</text:span>, all pixels in the selection that are similar to the current background color (CITE: see color similarity) are treated as transparent. <text:s/>This is why changes to the background color or color similarity setting, while a selection is active, are undoable/redoable commands. <text:s/>This feature is used for primitive background subtraction – for copying an object rendered against a fairly solid background.</text:p>
   <text:p text:style-name="Text_20_body">The area of the document covered by the selection, before selection transparency is applied, is stored in <text:span text:style-name="Code_20_Term">kpSelection</text:span> and accessible via the <text:span text:style-name="Code_20_Term">pixmap()</text:span> and <text:span text:style-name="Code_20_Term">opaquePixmap()</text:span> methods. <text:s/>The selection image, after any selection transparency is applied, is accessible via the <text:span text:style-name="Code_20_Term">transparentPixmap()</text:span> method. <text:s/>Copying the image to the clipboard, and all image effect commands, operate on the image data <text:span text:style-name="Emphasis">before</text:span> selection transparency is applied (TODO: name a good reason why?). <text:s/>However, pushing the selection onto the image uses the the selection image data after selection transparency is applied.</text:p>
   <text:p text:style-name="Text_20_body">As an example, suppose:</text:p>
   <text:list text:style-name="L6">
    <text:list-item>
     <text:p text:style-name="P27">There is currently a floating, rectangular selection of a red apple on a blue background.</text:p>
    </text:list-item>
    <text:list-item>
     <text:p text:style-name="P27">The background color is blue.</text:p>
    </text:list-item>
    <text:list-item>
     <text:p text:style-name="P27">The selection transparency is opaque.</text:p>
    </text:list-item>
   </text:list>
   <text:p text:style-name="Text_20_body">If we were to move this selection on top of a green area of the document, we would have an apple on top of a striking blue area on top of the green. <text:s/>If we were to now switch the selection transparency to transparent, we would now have just the apple on top of the green. <text:s/>All blue from the selection would be removed. <text:s/>If the apple happened to have any blue (maybe someone dropped some blue paint on it), it too would be removed, resulting in a hole in the apple.</text:p>
   <text:p text:style-name="Text_20_body">If we were to deselect the selection, pushing it onto the document, we would end up with this apple on top of the green. <text:s/>However, if we were to copy the selection to another program, the blue would still be in the image data in the destination program.</text:p>
   <text:p text:style-name="Text_20_body">If we were to now invert the selection, the blue would become yellow. <text:s/>The background of the selection would not be removed by selection transparency as it is now yellow, not blue. <text:s/>If we were to invert again or undo, the background would revert to blue and it would be viewed as transparent again due to selection transparency.</text:p>
   <text:h text:style-name="Heading_20_4" text:outline-level="4">Lifecycle</text:h>
   <text:p text:style-name="Text_20_body">When the user drags to select an area of the document, the document is not modified so the command history is not changed. <text:s/>This is to allow the user to selection to continually change the selected area without nuking the redo history [CITE]. <text:s/>As the current selection is just a border, all <text:span text:style-name="Code_20_Term">kpSelection</text:span> image data accessors (<text:span text:style-name="Code_20_Term">pixmap()</text:span>, <text:span text:style-name="Code_20_Term">opaquePixmap()</text:span>, <text:span text:style-name="Code_20_Term">transparentPixmap()</text:span>) will return a null image. <text:s/>Selection transparency has no effect, yet.</text:p>
   <text:p text:style-name="Text_20_body">In order to modify the contents of the selection (e.g. an image effect on a selection or drag-moving the selection), the image data must be copied or pulled from the document to form a <text:span text:style-name="Non-Code_20_Term">floating selection</text:span> that hovers as a temporary layer on top of the document. <text:s/>It is no longer just a border. <text:s/>Floating selections&apos; image data accessors will return non-null images. <text:s/>Such an operation is considered to modify the document and is recorded in the command history as a <text:span text:style-name="Code_20_Term">kpToolSelectionPullFromDocumentCommand</text:span> (which wraps a call to <text:span text:style-name="Code_20_Term">kpDocument::selectionPullFromDocument())</text:span>.</text:p>
   <text:p text:style-name="Text_20_body">Pulling from the document destructively leaves in the place of all opaque pixels inside the selection (after applying selection transparency), the background color (TODO: a good reason why). <text:s/>However, if the pull is being caused by a drag-move, the user can non-destructively pull from the document by holding <text:span text:style-name="Code_20_Term">CTRL</text:span>. <text:s/>KolourPaint actually implements this by destructively pulling and then gets <text:span text:style-name="Code_20_Term">kpToolSelectionMoveCommand</text:span> to stamp the transparent selection back onto the document, without destroying the selection, by using <text:span text:style-name="Code_20_Term">kpDocument::selectionCopyOntoDocument()</text:span>.</text:p>
   <text:p text:style-name="Text_20_body">Floating selections can be manipulated by:</text:p>
   <text:list text:style-name="L7">
    <text:list-item>
     <text:p text:style-name="P28">Image effect commands</text:p>
    </text:list-item>
    <text:list-item>
     <text:p text:style-name="P28">Several selection commands</text:p>
     <text:list>
      <text:list-item>
       <text:p text:style-name="P28"><text:span text:style-name="Code_20_Term">kpToolSelectionMoveCommand</text:span> for moving the selection around</text:p>
      </text:list-item>
      <text:list-item>
       <text:p text:style-name="P28"><text:span text:style-name="Code_20_Term">kpToolSelectionResizeScaleCommand</text:span> for scaling the selection (but not resizing – you can only resize text selections)</text:p>
      </text:list-item>
      <text:list-item>
       <text:p text:style-name="P28"><text:span text:style-name="Code_20_Term">kpToolSelectionTransparencyCommand</text:span> for changing selection transparency parameters (opaque/transparent selection choice, background color and color similarity)</text:p>
      </text:list-item>
      <text:list-item>
       <text:p text:style-name="P28"><text:span text:style-name="Code_20_Term">kpToolSelectionPushOntoDocumentCommand</text:span> for destroying the selection by either throwing it away (using <text:span text:style-name="Code_20_Term">kpDocument::selectionDelete()</text:span>) or by pushing its contents (after selection transparency is applied) onto the document (using <text:span text:style-name="Code_20_Term">kpDocument::selectionPushOntoDocument()</text:span>).</text:p>
      </text:list-item>
     </text:list>
    </text:list-item>
   </text:list>
   <text:h text:style-name="Heading_20_3" text:outline-level="3">Text</text:h>
   <text:p text:style-name="Text_20_body">Text selections are rectangular boxes containing a list of text lines. <text:s/>The selection transparency field is ignored with text style (<text:span text:style-name="Code_20_Term">kpTextStyle</text:span>) taking its place.</text:p>
   <text:h text:style-name="Heading_20_4" text:outline-level="4">Text Styles</text:h>
   <text:p text:style-name="Text_20_body">A text style contains the font family, size in points, color and effects (bold, italic, underline, strike through).</text:p>
   <text:p text:style-name="Text_20_body">Background color is also stored but is effectively transparent if selection transparency is set to transparent. <text:s/>In other words, a transparent background can be achieved through either a transparent background color or, if selection transparency is set to transparent, any color. <text:s/>Changes to the background color (TODO: and color similarity out of laziness?) are undoable as they affect the selection.</text:p>
   <text:h text:style-name="Heading_20_4" text:outline-level="4">Life Cycle</text:h>
   <text:p text:style-name="Text_20_body">When the user drags to create a text box, it instantly becomes floating and this is considered to modify the document so is undoable. <text:s/>There is no pulling from the document to create a text box. <text:s text:c="3"/>ACTION: simply dragging out a text box should not modify the document – it&apos;s like dragging out a selection border.</text:p>
   <text:p text:style-name="Text_20_body">It is possible to add and remove text and each text operation is undoable. <text:s/>However, the cursor position is not maintained in the command history (ACTION: it would be neat to do so). <text:s/>ACTION: There is currently no dynamic wordwrap, unlike KWrite.</text:p>
   <text:p text:style-name="Text_20_body"><text:span text:style-name="Code_20_Term">pixmap()</text:span>, <text:span text:style-name="Code_20_Term">opaquePixmap()</text:span> and <text:span text:style-name="Code_20_Term">transparentPixmap()</text:span> always return a non-null pixmap and they all return the same thing, since selection transparency is ignored. <text:s/>However, it is generally incorrect to use these methods for text boxes with transparent backgrounds. <text:s/>This is because text boxes are floating and rendered on top of a document, which usually contains some opaque content, permitting text antialiasing. <text:s/>But these methods are not aware of this underlying content so cannot antialias, giving a different – and lower quality – result compared to what the user sees on screen. <text:s/>Use the <text:span text:style-name="Code_20_Term">paint()</text:span> method, which accepts the background image data, instead.</text:p>
   <text:p text:style-name="Text_20_body">For simplicity, it is not possible to convert to and from a shape selection and a text selection. <text:s/>As a result, you cannot apply image effects onto a text selection. <text:s/>You can resize a text box but not scale it.</text:p>
   <text:p text:style-name="Text_20_body"/>
   <text:p text:style-name="Text_20_body"><text:span text:style-name="Code_20_Term"/></text:p>
   <text:p text:style-name="Text_20_body"><text:span text:style-name="Code_20_Term">tools/selection/</text:span> contains selection tools.</text:p>
   <text:p text:style-name="Text_20_body"><text:span text:style-name="Code_20_Term">commands/tools/selection/</text:span> contains the commands used by those tools and permit undo and redo of selection modifications. <text:s/>This makes KolourPaint enormously complex.</text:p>
   <text:p text:style-name="Text_20_body"/>
   <text:p text:style-name="Text_20_body"/>
   <text:p text:style-name="Text_20_body">TODO: selection undo/redo in detail – use cases and deselecting a selection if selecting a new selection border; restoring selection transparency settings (e.g. background color) on undo/redo and keeping them in sync with selections</text:p>
   <text:h text:style-name="Heading_20_2" text:outline-level="2">Temp Pixmaps</text:h>
   <text:p text:style-name="Text_20_body">Should be merged with selections and future layer class.</text:p>
   <text:p text:style-name="P29"/>
   <text:p text:style-name="P20">Chapter 4</text:p>
   <text:h text:style-name="Heading_20_1" text:outline-level="1">Conclusion</text:h>
   <text:p text:style-name="Text_20_body">TODO</text:p>
   <text:p text:style-name="Text_20_body"/>
   <text:h text:style-name="P21" text:outline-level="2">Achievements</text:h>
   <text:p text:style-name="Text_20_body">TODO</text:p>
   <text:p text:style-name="Text_20_body"/>
   <text:p text:style-name="Text_20_body"/>
   <text:p text:style-name="Text_20_body"/>
   <text:p text:style-name="Text_20_body"/>
   <text:p text:style-name="Text_20_body"/>
   <text:p text:style-name="P25"/>
   <text:h text:style-name="P21" text:outline-level="2">Future Work</text:h>
   <text:p text:style-name="Text_20_body">TODO</text:p>
   <text:p text:style-name="Text_20_body"/>
   <text:bibliography text:style-name="Sect1" text:name="Bibliography1">
    <text:bibliography-source>
     <text:index-title-template text:style-name="Bibliography_20_Heading">Bibliography</text:index-title-template>
     <text:bibliography-entry-template text:bibliography-type="article" text:style-name="Bibliography_20_1">
      <text:index-entry-bibliography text:bibliography-data-field="number"/>
      <text:index-entry-span>[</text:index-entry-span>
      <text:index-entry-bibliography text:bibliography-data-field="identifier"/>
      <text:index-entry-span>] </text:index-entry-span>
      <text:index-entry-bibliography text:bibliography-data-field="author"/>
      <text:index-entry-bibliography text:bibliography-data-field="title"/>
      <text:index-entry-bibliography text:bibliography-data-field="year"/>
     </text:bibliography-entry-template>
     <text:bibliography-entry-template text:bibliography-type="book" text:style-name="Bibliography_20_1">
      <text:index-entry-span>[</text:index-entry-span>
      <text:index-entry-bibliography text:bibliography-data-field="identifier"/>
      <text:index-entry-span>] </text:index-entry-span>
      <text:index-entry-bibliography text:bibliography-data-field="author"/>
      <text:index-entry-span>, </text:index-entry-span>
      <text:index-entry-bibliography text:style-name="Bibliography_20_Conference_20_Name" text:bibliography-data-field="title"/>
      <text:index-entry-span>, </text:index-entry-span>
      <text:index-entry-bibliography text:bibliography-data-field="publisher"/>
      <text:index-entry-span>, </text:index-entry-span>
      <text:index-entry-bibliography text:bibliography-data-field="year"/>
     </text:bibliography-entry-template>
     <text:bibliography-entry-template text:bibliography-type="booklet" text:style-name="Bibliography_20_1">
      <text:index-entry-bibliography text:bibliography-data-field="author"/>
      <text:index-entry-bibliography text:bibliography-data-field="title"/>
      <text:index-entry-bibliography text:bibliography-data-field="year"/>
     </text:bibliography-entry-template>
     <text:bibliography-entry-template text:bibliography-type="conference" text:style-name="Bibliography_20_1">
      <text:index-entry-span>[</text:index-entry-span>
      <text:index-entry-bibliography text:bibliography-data-field="identifier"/>
      <text:index-entry-span>] </text:index-entry-span>
      <text:index-entry-bibliography text:bibliography-data-field="author"/>
      <text:index-entry-span>, &quot;</text:index-entry-span>
      <text:index-entry-bibliography text:bibliography-data-field="title"/>
      <text:index-entry-span>,&quot; </text:index-entry-span>
      <text:index-entry-bibliography text:style-name="Bibliography_20_Conference_20_Name" text:bibliography-data-field="journal"/>
      <text:index-entry-span>, </text:index-entry-span>
      <text:index-entry-bibliography text:bibliography-data-field="publisher"/>
      <text:index-entry-span>, </text:index-entry-span>
      <text:index-entry-bibliography text:bibliography-data-field="year"/>
      <text:index-entry-span>, </text:index-entry-span>
      <text:index-entry-bibliography text:bibliography-data-field="pages"/>
     </text:bibliography-entry-template>
     <text:bibliography-entry-template text:bibliography-type="custom1" text:style-name="Bibliography_20_1">
      <text:index-entry-bibliography text:bibliography-data-field="author"/>
      <text:index-entry-bibliography text:bibliography-data-field="title"/>
      <text:index-entry-bibliography text:bibliography-data-field="year"/>
     </text:bibliography-entry-template>
     <text:bibliography-entry-template text:bibliography-type="custom2" text:style-name="Bibliography_20_1">
      <text:index-entry-bibliography text:bibliography-data-field="author"/>
      <text:index-entry-bibliography text:bibliography-data-field="title"/>
      <text:index-entry-bibliography text:bibliography-data-field="year"/>
     </text:bibliography-entry-template>
     <text:bibliography-entry-template text:bibliography-type="custom3" text:style-name="Bibliography_20_1">
      <text:index-entry-bibliography text:bibliography-data-field="author"/>
      <text:index-entry-bibliography text:bibliography-data-field="title"/>
      <text:index-entry-bibliography text:bibliography-data-field="year"/>
     </text:bibliography-entry-template>
     <text:bibliography-entry-template text:bibliography-type="custom4" text:style-name="Bibliography_20_1">
      <text:index-entry-bibliography text:bibliography-data-field="author"/>
      <text:index-entry-bibliography text:bibliography-data-field="title"/>
      <text:index-entry-bibliography text:bibliography-data-field="year"/>
     </text:bibliography-entry-template>
     <text:bibliography-entry-template text:bibliography-type="custom5" text:style-name="Bibliography_20_1">
      <text:index-entry-bibliography text:bibliography-data-field="author"/>
      <text:index-entry-bibliography text:bibliography-data-field="title"/>
      <text:index-entry-bibliography text:bibliography-data-field="year"/>
     </text:bibliography-entry-template>
     <text:bibliography-entry-template text:bibliography-type="email" text:style-name="Bibliography_20_1">
      <text:index-entry-bibliography text:bibliography-data-field="author"/>
      <text:index-entry-bibliography text:bibliography-data-field="title"/>
      <text:index-entry-bibliography text:bibliography-data-field="year"/>
     </text:bibliography-entry-template>
     <text:bibliography-entry-template text:bibliography-type="inbook" text:style-name="Bibliography_20_1">
      <text:index-entry-bibliography text:bibliography-data-field="author"/>
      <text:index-entry-bibliography text:bibliography-data-field="title"/>
      <text:index-entry-bibliography text:bibliography-data-field="year"/>
     </text:bibliography-entry-template>
     <text:bibliography-entry-template text:bibliography-type="incollection" text:style-name="Bibliography_20_1">
      <text:index-entry-bibliography text:bibliography-data-field="author"/>
      <text:index-entry-bibliography text:bibliography-data-field="title"/>
      <text:index-entry-bibliography text:bibliography-data-field="year"/>
     </text:bibliography-entry-template>
     <text:bibliography-entry-template text:bibliography-type="inproceedings" text:style-name="Bibliography_20_1">
      <text:index-entry-bibliography text:bibliography-data-field="author"/>
      <text:index-entry-bibliography text:bibliography-data-field="title"/>
      <text:index-entry-bibliography text:bibliography-data-field="year"/>
     </text:bibliography-entry-template>
     <text:bibliography-entry-template text:bibliography-type="journal" text:style-name="Bibliography_20_1">
      <text:index-entry-bibliography text:bibliography-data-field="author"/>
      <text:index-entry-bibliography text:bibliography-data-field="title"/>
      <text:index-entry-bibliography text:bibliography-data-field="year"/>
     </text:bibliography-entry-template>
     <text:bibliography-entry-template text:bibliography-type="manual" text:style-name="Bibliography_20_1">
      <text:index-entry-bibliography text:bibliography-data-field="author"/>
      <text:index-entry-bibliography text:bibliography-data-field="title"/>
      <text:index-entry-bibliography text:bibliography-data-field="year"/>
     </text:bibliography-entry-template>
     <text:bibliography-entry-template text:bibliography-type="mastersthesis" text:style-name="Bibliography_20_1">
      <text:index-entry-bibliography text:bibliography-data-field="author"/>
      <text:index-entry-bibliography text:bibliography-data-field="title"/>
      <text:index-entry-bibliography text:bibliography-data-field="year"/>
     </text:bibliography-entry-template>
     <text:bibliography-entry-template text:bibliography-type="misc" text:style-name="Bibliography_20_1">
      <text:index-entry-bibliography text:bibliography-data-field="number"/>
      <text:index-entry-span>[</text:index-entry-span>
      <text:index-entry-bibliography text:bibliography-data-field="identifier"/>
      <text:index-entry-span>] </text:index-entry-span>
      <text:index-entry-bibliography text:bibliography-data-field="author"/>
      <text:index-entry-span>, &quot;</text:index-entry-span>
      <text:index-entry-bibliography text:bibliography-data-field="title"/>
      <text:index-entry-span>,&quot; </text:index-entry-span>
      <text:index-entry-bibliography text:bibliography-data-field="year"/>
      <text:index-entry-span>; </text:index-entry-span>
      <text:index-entry-bibliography text:bibliography-data-field="url"/>
     </text:bibliography-entry-template>
     <text:bibliography-entry-template text:bibliography-type="phdthesis" text:style-name="Bibliography_20_1">
      <text:index-entry-bibliography text:bibliography-data-field="author"/>
      <text:index-entry-bibliography text:bibliography-data-field="title"/>
      <text:index-entry-bibliography text:bibliography-data-field="year"/>
     </text:bibliography-entry-template>
     <text:bibliography-entry-template text:bibliography-type="proceedings" text:style-name="Bibliography_20_1">
      <text:index-entry-bibliography text:bibliography-data-field="author"/>
      <text:index-entry-bibliography text:bibliography-data-field="title"/>
      <text:index-entry-bibliography text:bibliography-data-field="year"/>
     </text:bibliography-entry-template>
     <text:bibliography-entry-template text:bibliography-type="techreport" text:style-name="Bibliography_20_1">
      <text:index-entry-bibliography text:bibliography-data-field="author"/>
      <text:index-entry-bibliography text:bibliography-data-field="title"/>
      <text:index-entry-bibliography text:bibliography-data-field="year"/>
     </text:bibliography-entry-template>
     <text:bibliography-entry-template text:bibliography-type="unpublished" text:style-name="Bibliography_20_1">
      <text:index-entry-bibliography text:bibliography-data-field="author"/>
      <text:index-entry-bibliography text:bibliography-data-field="title"/>
      <text:index-entry-bibliography text:bibliography-data-field="year"/>
     </text:bibliography-entry-template>
     <text:bibliography-entry-template text:bibliography-type="www" text:style-name="Bibliography_20_1">
      <text:index-entry-bibliography text:bibliography-data-field="author"/>
      <text:index-entry-bibliography text:bibliography-data-field="title"/>
      <text:index-entry-bibliography text:bibliography-data-field="year"/>
     </text:bibliography-entry-template>
    </text:bibliography-source>
    <text:index-body>
     <text:index-title text:style-name="Sect2" text:name="Bibliography1_Head">
      <text:p text:style-name="P30">Bibliography</text:p>
     </text:index-title>
    </text:index-body>
   </text:bibliography>
   <text:p text:style-name="P31"/>
  </office:text>
 </office:body>
</office:document-content>